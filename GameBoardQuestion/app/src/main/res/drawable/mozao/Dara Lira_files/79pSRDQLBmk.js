/*!CK:1616424483!*//*1434123729,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["vD80w"]); }

__d("BanzaiScribe",["Banzai"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j){return {log:function(k,l,m){var n=[l];if(m!=null)n.push(m);g.post('scribe:'+k,n,j);}};}var i=h({});i.create=h;e.exports=i;},null);
__d("SamplingPolicyBase",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){"use strict";throw 'Tried to instantiate SamplingPolicyBase';}g.prototype.getName=function(){"use strict";return this.name;};g.prototype.isSampled=function(){"use strict";if(typeof(this.sampled)=='undefined')this.sampled=this.decideIfSampled();return this.sampled;};e.exports=g;},null);
__d("FbtraceForcedByServerPolicy",["FbtraceForcedByServer","SamplingPolicyBase","copyProperties"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();'use strict';var j;function k(){this.name='FbtraceForcedByServerPolicy';}k.get=function(){if(typeof(j)=='undefined')j=new k();return j;};function l(){return g.forced;}i(k.prototype,h.prototype,{decideIfSampled:l});e.exports=k;},null);
/**
 * @generated SignedSource<<623c7cbcff19956af736c3d064fc689d>>
 *
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 * !! This file is a check-in of a static_upstream project!      !!
 * !!                                                            !!
 * !! You should not modify this file directly. Instead:         !!
 * !! 1) Use `fjs use-upstream` to temporarily replace this with !!
 * !!    the latest version from upstream.                       !!
 * !! 2) Make your changes, test them, etc.                      !!
 * !! 3) Use `fjs push-upstream` to copy your changes back to    !!
 * !!    static_upstream.                                        !!
 * !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 *
 * Copyright (C) 2010 by Johannes Baagoe <baagoe@baagoe.org>
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 * THE SOFTWARE.
 *
 * @providesModule Alea
 * @preserve-header
 */__d("Alea",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){var i=4022871197,j=function(k){k=k.toString();for(var l=0;l<k.length;l++){i+=k.charCodeAt(l);var m=.02519603282416938*i;i=m>>>0;m-=i;m*=i;i=m>>>0;m-=i;i+=m*4294967296;}return (i>>>0)*2.3283064365386963e-10;};j.version='Mash 0.9';return j;}function h(){return (function(i){var j=0,k=0,l=0,m=1;if(i.length===0)i=[new Date()];var n=new g();j=n(' ');k=n(' ');l=n(' ');for(var o=0;o<i.length;o++){j-=n(i[o]);if(j<0)j+=1;k-=n(i[o]);if(k<0)k+=1;l-=n(i[o]);if(l<0)l+=1;}n=null;var p=function(){var q=2091639*j+m*2.3283064365386963e-10;j=k;k=l;l=q-(m=q|0);return l;};p.version='Alea 0.9';p.args=i;return p;}(Array.prototype.slice.call(arguments)));}e.exports=h;},null);
__d("Random",["Alea","ServerNonce"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();'use strict';var h=b('ServerNonce').ServerNonce,i=g(h),j={random:i,uint32:function(){return Math.floor(i()*4294967296);}};e.exports=j;},null);
__d("guardFunction",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j){return function(){if(h.apply(j||this,arguments))i.apply(j||this,arguments);};}e.exports=g;},null);
__d("Fbtrace",["Arbiter","BanzaiScribe","ErrorUtils","FbtraceForcedByServer","FbtraceForcedByServerPolicy","Random","SiteData","copyProperties","guardFunction"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();'use strict';var p='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/',q='AAAAAAAAAAA';for(var r in Error)if(Error.hasOwnProperty(r))t[r]=Error[r];var s=Error===null?null:Error.prototype;t.prototype=Object.create(s);t.prototype.constructor=t;t.__superConstructor__=Error;function t(ia){Error.call(this,ia);}function u(ia){i.reportError(new t(ia));}function v(){var ia=function(){var la=0,ma=0,na='';for(var oa=10;oa>=0;oa--){if(la<6){ma=l.uint32();la=32;}if(oa===0)ma=ma&7;na=p.charAt(ma&63)+na;ma>>=6;la-=6;}return na;},ja,ka;for(ja=3;ja>0;ja--){ka=ia();if(ka!=q)return ka;}u('failed to generate valid Fbtrace id');return q;}function w(){n(this,w);}n(w,{isOn:function(){return false;},replySend:function(ia,ja){},requestSend:function(ia,ja,ka){ca(ia,ja);return {metadata:function(){return (void 0);},replyReceive:function(la){}};}});var x=new w();function y(ia,ja,ka){if(!ia)throw {name:'ArgumentError',message:'no valid service name specified'};if(!ja)throw {name:'ArgumentError',message:'no valid version specified'};var la=h,ma=0,na=v(),oa=v(),pa=ba(na),qa={service:ia,version:ja},ra=function(wa){if(typeof(wa)=='undefined')return 'undefined';if(typeof(wa)!='string')wa=ra(JSON.stringify(wa));return wa;},sa=function(wa){var xa='';for(var ya in wa){if(xa.length>0)xa+='\x02';xa+=ra(ya)+'\x03'+ra(wa[ya]);}return xa;},ta=function(wa,xa,event,ya,za){ma++;return [za,ma,na,wa,xa,ra(event),sa(ya)].join('\x01');},ua=function(wa,xa,event,ya,za){if(!za&&typeof(za)=='undefined')za=Date.now()*1000;var ab=ta(wa,xa,event,ya,za);la.log('fbtrace',ab,pa);},va=function(){return oa;};ua(q,oa,'#rqrecv',n(ka,qa));n(this,y);n(this,{replySend:function(wa,xa){xa=n(xa,qa,{success:wa?'true':'false'});ua(q,oa,'#rpsend',xa);},requestSend:function(wa,xa,ya){ca(wa,xa);var za=va(),ab=v();ya=n(ya,qa,{op:wa,'remote:service':xa});ua(za,ab,'#rqsend',ya);return {metadata:function(){return na+ab;},replyReceive:function(bb){ua(za,ab,'#rprecv',n(bb,qa));},parentNode:this};}});}n(y,{isOn:function(){return true;}});function z(){return x;}function aa(ia,ja,ka){ka=ka||{};ka.init=true;var la=k.get();if(la.isSampled()){return new y(ia,ja,ka);}else return new w();}function ba(ia){var ja=ia.charAt(ia.length-1);return p.indexOf(ja)%32;}function ca(ia,ja){if(!ia)throw {name:'ArgumentError',message:'no valid operation specified'};if(!ja)throw {name:'ArgumentError',message:'no valid remote:service specified'};}function da(ia,ja){var ka=x,la;x=ia;try{la=ja();}finally{x=ka;}return la;}var ea=function(ia,ja){var ka=z(),la=ja.request,ma=false;if(!ka.isOn()&&j.forced&&/\/upload\/(?:composer|photos)\/|\/ajax\/composerx\/attachment\/media\//.test(la.uri.toString())){ka=aa('photo_upload_kludge',String(m.revision||'dev'),{policy:'PhotoUpload'});ma=true;}if(ka.isOn()){var na=ma?{policy:'PhotoUpload'}:{};if(la.userActionId)na.user_action_id=la.userActionId;var oa=ka.requestSend(la.uri.toString(),'www',na);la.fbtraceRemoteNode=oa;la.transport.setRequestHeader('X-Fbtrace-Meta',oa.metadata());}},fa=function(ia,ja){ja.request.fbtraceRemoteNode.replyReceive({is_last:ja.response.is_last,success:true});setTimeout(function(){ja.request.fbtraceRemoteNode.parentNode.replySend(true,{});},0);},ga=function(ia,ja){ja.request.fbtraceRemoteNode.replyReceive({is_last:ja.response.is_last,success:false,error_code:ja.response.error,error_summary:ja.response.errorSummary,error_description:ja.response.errorDescription});setTimeout(function(){ja.request.fbtraceRemoteNode.parentNode.replySend(false,{});},0);},ha=function(ia,ja){return ja.request.fbtraceRemoteNode;};g.subscribe('AsyncRequest/will_send',ea);g.subscribe('AsyncRequest/response',o(ha,fa));g.subscribe('AsyncRequest/error',o(ha,ga));e.exports={defaultNode:z,requestReceive:aa,withDefaultNode:da};},null);
__d("PhotosMultiUploadInput",["Arbiter","Animation","AsyncUploadRequest","ComposerWaterfallEvent","ComposerXController","ComposerXDragDrop","ComposerXMarauderLogger","ComposerXMediaUploadHandler","CSS","Dialog","DOM","DragDropTarget","Event","JpegResizer","Parent","PhotosMimeType","PhotosUploadID","PhotosUploadWaterfallXMixin","PUWApplications","PUWMethods","PUWSteps","ProgressBar","Tooltip","WaterfallIDGenerator","XComposerPhotoUploader","$","copyProperties","csx","cx","mixin","performanceNow","fbt","updatePhotoProgressBar","Fbtrace"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma){b.__markCompiled&&b.__markCompiled();var na=1366052;b("Fbtrace");function oa(xa,ya,za,ab){"use strict";this._grid=ua.getInstance(ab.gridID);this._grid.setProgressBarMarkup(xa).setVideoIconMarkup(ya).setConfig(ab);za.getInput().multiple=(ab.maxselect!=1)&&i.isSupported();za.subscribe('change',function(bb,event){if(event.getTarget().value)this._grid.doFileUpload(za);}.bind(this));if(!this._grid.sessionStarted){this._grid.sessionStarted=true;this._grid.logStep(aa.CLIENT_FLOW_BEGIN,{custom_tags:{high_quality:ab.initWithHighQuality}});}this._grid.logStep(aa.CLIENT_SELECT_BEGIN);g.inform('PhotosMultiUploadInput/loaded/'+ab.gridID,null,g.BEHAVIOR_PERSISTENT);}oa.prototype.getGrid=function(){"use strict";return this._grid;};oa.prototype.onQualitySettingChanged=function(xa){"use strict";this._grid.setQuality(xa);};ga(oa,{imageUploadDone:function(xa,ya,za,ab,bb){pa[xa].imageUploadDone(ya,za,ab,bb);},addCameraImage:function(xa,ya,za){pa[xa].addCameraImage(ya,za);},initDragDrop:function(xa,ya){g.inform('PhotosMultiUploadInput/initDragDrop/'+xa,{dragDropArea:ya},g.BEHAVIOR_PERSISTENT);},imageUploadFail:function(xa,ya){pa[xa].removeLoadingIndicator(ya.getFile().uploadID);},doFileUpload:function(xa,ya){pa[xa].doFileUpload(ya);},onFilesDrop:function(xa,ya){pa[xa].onFilesDrop(ya);},getWaterfallID:function(xa){return ua.getInstance(xa).getWaterfallID();},clearSession:function(xa){pa[xa].clearSession();},getConfig:function(xa){return pa[xa].getConfig();}});var pa={},qa=0,ra=ja(x);for(var sa in ra)if(ra.hasOwnProperty(sa))ua[sa]=ra[sa];var ta=ra===null?null:ra.prototype;ua.prototype=Object.create(ta);ua.prototype.constructor=ua;ua.__superConstructor__=ra;function ua(xa){"use strict";this._loadingIndicators={};this._numRemainingFiles=0;this._progressBarMarkup=null;this._videoIconMarkup=null;this._gridID=xa;this._dragDropTarget=null;this._submitListener=null;this._fileInputInstances=[];this._uploadTimers={};this._sessionsStarted=false;this._waterfallID=null;this._resizer=null;this._numUploadsSucceeded=0;this._numUploadsFailed=0;this._uploadIDToFileUpload={};this._failedUploadIDs={};g.subscribe('multi-upload/video-removed/'+this._gridID,function(){q.remove(this._videoIconMarkup);this._submitListener&&this._submitListener.remove();this._submitListener=null;this._fileInputInstances.forEach(function(ya){ya.clear();});}.bind(this));g.subscribe('multi-upload/image-removed/'+this._gridID,function(){this._logComposerWaterfallEvent(j.PHOTO_REMOVE);}.bind(this));g.subscribe('PhotosMultiUploadInput/initDragDrop/'+this._gridID,function(ya,za){this.initDragDrop(za.dragDropArea);}.bind(this));g.subscribe('AttachmentsPhotoEditor/logPhotoEditorLaunched'+this._gridID,function(ya,za){this.logStep(aa.CLIENT_PHOTO_EDIT_BEGIN);}.bind(this));g.subscribe('AttachmentsPhotoEditor/newImage'+this._gridID,this._onEditedImage.bind(this));}ua.prototype.getWaterfallID=function(){"use strict";if(!this._waterfallID)this._waterfallID=da.generate();return this._waterfallID;};ua.prototype.getWaterfallAppName=function(){"use strict";return y.WEB_COMPOSER;};ua.prototype.getLoadingIndicator=function(xa){"use strict";var ya=this._loadingIndicators[xa];return ya;};ua.prototype.initDragDrop=function(xa){"use strict";this._dragDropTarget&&this._dragDropTarget.disable();this._dragDropTarget=new r(xa).setOnFilesDropCallback(function(ya){this.onFilesDrop(ya,z.DRAGDROP);}.bind(this)).setFileFilter(l.filterImages).enable();};ua.prototype.setConfig=function(xa){"use strict";this._config=xa;this._isHighQuality=(xa.hasOwnProperty('initWithHighQuality'))?xa.initWithHighQuality:true;if(!t.isSupported()){this.logStep(aa.CLIENT_PROCESS_UNAVAILABLE);}else if(this._config.useResizer){this._resizer=new t(this._config.maxselect===1?1:t.DEFAULT_POOL_SIZE);this._resizer.setHighQuality(this._isHighQuality);}if(!this._waterfallID)this._waterfallID=xa.waterfallID;this._concurrentLimit=xa.concurrentLimit;return this;};ua.prototype.setProgressBarMarkup=function(xa){"use strict";this._progressBarMarkup=xa;return this;};ua.prototype.setVideoIconMarkup=function(xa){"use strict";this._videoIconMarkup=xa;var ya=q.find(xa,"._3ev");s.listen(ya,'click',this._onVideoRemoved.bind(this));return this;};ua.prototype.setQuality=function(xa){"use strict";this._isHighQuality=xa;this._resizer&&this._resizer.setHighQuality(xa);this.logStep(aa.CLIENT_QUALITY_SWITCH,{custom_tags:{high_quality:this._isHighQuality}});};ua.prototype.imageUploadDone=function(xa,ya,za,ab){"use strict";this._numUploadsSucceeded++;var bb=this.getLoadingIndicator(ya);if(!bb)return;if(q.contains(document.body,bb.getRoot()))q.replace(bb.getRoot(),xa);var cb={};cb[ya]=za;this._informImagesAdded(cb,ab);this._markUploadAsFinished();this._loadingIndicators[ya]=null;};ua.prototype.addCameraImage=function(xa,ya){"use strict";this.insertIntoGrid(xa);this._informImagesAdded({'0':ya},{});this.logStep(aa.CLIENT_ATTACH_PHOTO,{method:z.CAMERA,fbid:ya});};ua.prototype._informImagesAdded=function(xa,ya){"use strict";g.inform(['multi-upload/images-added/'+this._gridID,'multi-upload/images-added'],{fbids:xa,tagInfo:{exifLocation:ya}});g.inform('composer/updateViewerLocationEstimate',ya);};ua.prototype._generateLoadingIndicatorForPhoto=function(xa){"use strict";this._generateLoadingIndicator(xa.uploadID);};ua.prototype._generateLoadingIndicator=function(xa){"use strict";this._numRemainingFiles++;var ya=this._progressBarMarkup.cloneNode(true);s.listen(ya,'click',this._clickHandler.bind(this,xa));this.insertIntoGrid(ya);this._loadingIndicators[xa]=new ba(ya);};ua.prototype._generateUploadIDsAndLoadingIndicators=function(xa){"use strict";for(var ya=0;ya<xa.length;ya++){if(!xa[ya].uploadID)xa[ya].uploadID=w.getNewID();this._generateLoadingIndicator(xa[ya].uploadID);}};ua.prototype._clickHandler=function(xa,ya){"use strict";var za=ya.target,ab="_639";if(u.byClass(za,ab))if(this._failedUploadIDs[xa]){this.removeLoadingIndicator(xa);}else this.fileUploadCanceled(xa,this._uploadIDToFileUpload[xa]);var bb="_2zo7";if(u.byClass(za,bb)){o.hide(q.find(this.getLoadingIndicator(xa).getRoot(),"._2zo5"));this._retryFileUpload(this._uploadIDToFileUpload[xa].getFile());this._failedUploadIDs[xa]=false;}var cb="_2zo8";if(u.byClass(za,cb))this.removeLoadingIndicator(xa);};ua.prototype.fileUploadFailure=function(xa,ya,za){"use strict";this._numUploadsFailed++;this._failedUploadIDs[xa]=true;var ab=Date.now()-this._uploadTimers[xa],bb=0;if(ya.upload)bb=ya.upload.getRetryCount?ya.upload.getRetryCount():0;var cb=ya.response.getErrorDescription(),db=ya.response.getError();if(db===na)cb=JSON.stringify(za);this.logStep(aa.CLIENT_TRANSFER_FAIL,{dt:ab,error_code:db,error_info:cb,bytes:ya.upload.getFile().size,auto_retry_count:bb,custom_tags:{high_quality:this._isHighQuality,manual_retry:!!ya.upload.getFile().manuallyRetried}});if(this._config.useNewErrorUI){var eb=ya.response.isTransient()||ya.response.getError()==1004||ya.response.getError()==1006,fb=eb&&this._uploadIDToFileUpload[xa];this._showNewUploadFailedMessage(xa,ya.upload.getFile().name||ya.upload.getFile().filename||'',ya.response.getErrorSummary(),ya.response.getErrorDescription(),fb,ya.upload.getFile());this._markUploadAsFinished();}else{this._showUploadFailedMessage(xa);this._fadeOutFileUpload(xa);}};ua.prototype._fadeOutFileUpload=function(xa){"use strict";new h(this.getLoadingIndicator(xa).getRoot()).duration(2000).checkpoint().from('opacity',1).to('opacity',0).duration(1000).ondone(this.removeFileUpload.bind(this,xa)).go();};ua.prototype._showUploadFailedMessage=function(xa){"use strict";o.hide(q.find(this.getLoadingIndicator(xa).getRoot(),"._5l83"));o.show(q.find(this.getLoadingIndicator(xa).getRoot(),"._5l82"));};ua.prototype._showNewUploadFailedMessage=function(xa,ya,za,ab,bb,cb){"use strict";var db=this.getLoadingIndicator(xa).getRoot();o.hide(q.find(db,"._5l83"));o.show(q.find(db,"._2zo5"));var eb=q.find(db,"._2zo6");q.setContent(eb,ya);var fb=q.find(db,"._2zo5");ca.set(fb,za+': '+ab);if(bb){var gb=q.find(db,"._2zo7");o.show(gb);}else{var hb=q.find(db,"._2zo8");o.show(hb);}};ua.prototype._finishUploadBatch=function(){"use strict";g.inform('multi-upload/images-upload-completed/'+this._gridID);if(this._numUploadsFailed>0){this.logStep(aa.CLIENT_TRANSFER_BATCH_FAIL,{volume:this._numUploadsFailed,batch_size:this._numUploadsSucceeded+this._numUploadsFailed});}else this.logStep(aa.CLIENT_TRANSFER_BATCH_SUCCESS,{volume:this._numUploadsSucceeded});this._numUploadsSucceeded=0;this._numUploadsFailed=0;};ua.prototype.fileUploadCanceled=function(xa,ya){"use strict";ya&&ya.abort();var za={latency:Date.now()-this._uploadTimers[xa]};if(ya&&ya.getFile())za.bytes=ya.getFile().size;this.logStep(aa.CLIENT_TRANSFER_CANCEL,za);this.removeFileUpload(xa);};ua.prototype.removeFileUpload=function(xa){"use strict";this.removeLoadingIndicator(xa);this._markUploadAsFinished();};ua.prototype._markUploadAsFinished=function(){"use strict";this._numRemainingFiles=Math.max(0,this._numRemainingFiles-1);if(this._numRemainingFiles===0)this._finishUploadBatch();};ua.prototype.doFileUpload=function(xa){"use strict";var ya=false,za=false;switch(this._config.supportedFileTypes){case 'photos':za=true;break;case 'videos':ya=true;break;case 'both':ya=za=true;break;}var ab=ya&&n.isVideoFile(xa);this._submitListener&&this._submitListener.remove();if(ab){var bb=u.byTag(fa(this._gridID),'form'),cb=k.getComposerID(bb),db=new n(cb);db.handleVideoSelected(xa);}else if(za){this._photosSelected(xa);}else new p().setBody(la._("Desculpe, voc\u00ea pode selecionar apenas arquivos de v\u00eddeo.")).setTitle(la._("Arquivo incompat\u00edvel")).setModal(true).setButtons(p.OK).show();};ua.prototype.getConfig=function(){"use strict";return this._config;};ua.prototype._resizeUpload=function(xa,ya){"use strict";var za=xa.getFile();if(!za||!v(za.type).isJpeg())return ya(xa);var ab=ka();this.logStep(aa.CLIENT_PROCESS_BEGIN,{bytes:za.size,custom_tags:{high_quality:this._isHighQuality}});this._resizer.resizeBlob(za,function(bb,cb,db){cb=cb||za;if(bb){this.logStep(aa.CLIENT_PROCESS_FAIL,{dt:ka()-ab,bytes:cb.size,error_code:bb.code,error_info:bb.message,custom_tags:{high_quality:this._isHighQuality}});return ya(xa);}cb.uploadID=za.uploadID;cb.filename=za.name;xa.setFile(cb);this.logStep(aa.CLIENT_PROCESS_SUCCESS,{dt:ka()-ab,media_data_size:za.size,bytes:cb.size,custom_tags:{high_quality:this._isHighQuality,skipped_resizing:db}});ya(xa);}.bind(this),this._onResizeProgress.bind(this,za.uploadID));};ua.prototype._onResizeStart=function(xa){"use strict";this.logStep(aa.CLIENT_PROCESS_BEGIN,{bytes:xa.size,custom_tags:{high_quality:this._isHighQuality}});};ua.prototype._onResizeFail=function(xa,ya,za,ab){"use strict";this.logStep(aa.CLIENT_PROCESS_FAIL,{dt:ab,bytes:ya.size,error_code:za.code,error_info:za.message,custom_tags:{high_quality:this._isHighQuality}});};ua.prototype._onResizeSuccess=function(xa,ya,za,ab){"use strict";this.logStep(aa.CLIENT_PROCESS_SUCCESS,{dt:ab,media_data_size:xa.size,bytes:ya.size,custom_tags:{high_quality:this._isHighQuality,skipped_resizing:za}});};ua.prototype._isExceedMaxSelect=function(xa){"use strict";return this._config.maxselect>1&&xa>this._config.maxselect;};ua.prototype._showTooManyPhotosDialog=function(){"use strict";new p().setTitle(la._("Excesso de fotos")).setBody(la._({"*":"Desculpe, voc\u00ea n\u00e3o pode adicionar {maxselect} fotos \u00e0 uma mensagem. Se voc\u00ea desejar, voc\u00ea pode adicionar fotos \u00e0 mensagens adicionais."},[la.param("maxselect",this._config.maxselect,[0])])).setButtons(p.OK).setModal(true).show();};ua.prototype._photosSelected=function(xa){"use strict";var ya=xa.getInput(),za=va(ya);if(this._isExceedMaxSelect(za)){this._showTooManyPhotosDialog();return;}this._onBeforeAddUploadedImages();this._upload(xa,za);};ua.prototype._upload=function(xa,ya){"use strict";var za=xa.getInput(),ab=this._config.uploadData;if(this._config.waterfallID)ab.qn=this._config.waterfallID;var bb=function(){g.inform('multi-upload/images-upload-start/'+this._gridID,{imageCount:ya});}.bind(this),cb=new ea({uploadEndpoint:this._config.photoEndpoint,uploadData:ab,retryLimit:this._config.retryLimit,concurrentLimit:this._config.concurrentLimit,resizer:this._resizer,onUploadEnqueued:this._generateLoadingIndicatorForPhoto.bind(this),onUploadsEnqueued:bb,onUploadSent:function(){return xa.clear();},onResizeStart:this._onResizeStart.bind(this),onResizeProgress:this._onResizeProgress.bind(this),onResizeSuccess:this._onResizeSuccess.bind(this),onResizeFailure:this._onResizeFail.bind(this),onUploadStart:this._onFileUploadStart.bind(this),onUploadProgress:this._onUploadProgress.bind(this),onUploadSuccess:this._onFileUploadSuccess.bind(this),onUploadFailure:this.fileUploadFailure.bind(this)});cb.upload(za);this.logStep(aa.CLIENT_SELECT_SUCCESS,{times_selected:qa++,volume:ya,method:'file_selector'});};ua.prototype._onVideoRemoved=function(){"use strict";this._dragDropTarget&&this._dragDropTarget.enable();g.inform('multi-upload/video-removed/'+this._gridID);};ua.prototype.removeLoadingIndicator=function(xa){"use strict";var ya=this.getLoadingIndicator(xa);ya&&q.remove(ya.getRoot());delete this._loadingIndicators[xa];};ua.prototype._onFileUploadStart=function(xa,ya){"use strict";this._uploadIDToFileUpload[xa]=ya.upload;var za=q.find(this.getLoadingIndicator(xa).getRoot(),"._639");o.show(za);this._uploadTimers[xa]=Date.now();var ab={custom_tags:{high_quality:this._isHighQuality}};if(ya.upload&&ya.upload.getFile())ab.size=ya.upload.getFile().size;this.logStep(aa.CLIENT_TRANSFER_BEGIN,ab);this._logComposerWaterfallEvent(j.PHOTO_ADD);};ua.prototype._onUploadProgress=function(xa,ya){"use strict";var za=this.getLoadingIndicator(xa);if(!za||this._failedUploadIDs[xa])return;this._showProgressBar(za);o.removeClass(za.getRoot(),"_5v_0");ma(za,ya.event);};ua.prototype._onResizeProgress=function(xa,event){"use strict";var ya=this.getLoadingIndicator(xa);if(!ya)return;this._showProgressBar(ya);o.addClass(ya.getRoot(),"_5v_0");ya.setPosition(100*event.written/event.total);};ua.prototype._showProgressBar=function(xa){"use strict";o.hide(q.find(xa.getRoot(),"._2om"));o.show(q.find(xa.getRoot(),"._5e4h"));};ua.prototype._onFileUploadSuccess=function(xa,ya){"use strict";var za=Date.now()-this._uploadTimers[xa],ab={dt:za};if(ya.upload){ab.bytes=ya.upload.getFile().size;ab.auto_retry_count=ya.upload.getRetryCount?ya.upload.getRetryCount():0;ab.custom_tags={high_quality:this._isHighQuality,manual_retry:!!ya.upload.getFile().manuallyRetried};}this.logStep(aa.CLIENT_TRANSFER_SUCCESS,ab);this._logComposerWaterfallEvent(j.PHOTO_ADD_SUCCESS);};ua.prototype._logComposerWaterfallEvent=function(event){"use strict";if(!u.byClass(fa(this._gridID),"_119"))return;m.logEvent(event,this._getComposerID());};ua.prototype._getComposerID=function(){"use strict";return k.getComposerID(this._gridID);};ua.prototype._getAsyncUploadRequest=function(xa){"use strict";var ya=new ea({uploadEndpoint:this._config.photoEndpoint,uploadData:this._config.uploadData,concurrentLimit:this._config.concurrentLimit,onUploadStart:this._onFileUploadStart.bind(this),onUploadProgress:this._onUploadProgress.bind(this),onUploadSuccess:this._onFileUploadSuccess.bind(this),onUploadFail:this.fileUploadFailure.bind(this)});return ya.getAsyncUploadRequest(xa);};ua.prototype._onEditedImage=function(xa,ya){"use strict";this._onBeforeAddUploadedImages();this.logStep(aa.CLIENT_SELECT_BEGIN);this._generateUploadIDsAndLoadingIndicators([ya.blob]);var za=this._getGridItemElementByFBID(ya.fbid);if(za){var ab=this._loadingIndicators[ya.blob.uploadID].getRoot();q.insertBefore(za,ab);}g.inform('multi-upload/images-upload-start/'+this._gridID,{imageCount:1,method:z.EDITOR});var bb=this._getAsyncUploadRequest([ya.blob]);bb.setData(Object.assign({},this._config.uploadData,{original_fbid:ya.fbid,stickers:ya.stickers,text_overlays:ya.textOverlays,has_crop:ya.hasCrop,has_filter:ya.hasFilter}));bb.send();this.logStep(aa.CLIENT_SELECT_SUCCESS,{volume:1,method:z.EDITOR});this.logStep(aa.CLIENT_PHOTO_EDIT_SUCCESS);};ua.prototype._getGridItemElementByFBID=function(xa){"use strict";var ya=q.scry(fa(this._gridID),".fbVaultGridItem");for(var za=0;za<ya.length;za++)if(ya[za].dataset.originalfbid==xa)return ya[za];return null;};ua.prototype.onFilesDrop=function(xa,ya){"use strict";if(this._isExceedMaxSelect(xa.length)){this._showTooManyPhotosDialog();return;}this._onBeforeAddUploadedImages();this.logStep(aa.CLIENT_SELECT_BEGIN);this._generateUploadIDsAndLoadingIndicators(xa);g.inform('multi-upload/images-upload-start/'+this._gridID,{imageCount:xa.length,method:ya||z.DRAGDROP});var za=this._getAsyncUploadRequest(xa);if(this._resizer)za.setPreprocessHandler(this._resizeUpload.bind(this));za.send();this.logStep(aa.CLIENT_SELECT_SUCCESS,{volume:xa.length,method:ya||z.DRAGDROP});};ua.prototype._retryFileUpload=function(xa){"use strict";this._numRemainingFiles++;g.inform('multi-upload/images-upload-start/'+this._gridID,{imageCount:1});this.logStep(aa.CLIENT_TRANSFER_MANUAL_RETRY);xa.manuallyRetried=true;var ya=this._getAsyncUploadRequest([xa]);ya.send();};ua.prototype._onBeforeAddUploadedImages=function(){"use strict";if(!this.sessionStarted)this.logStep(aa.CLIENT_FLOW_BEGIN);if(this._config.maxselect==1)g.inform('multi-upload/composer-reset/'+this._gridID);this.sessionStarted=true;};ua.prototype.clearSession=function(){"use strict";this.sessionStarted=false;};ua.prototype.insertIntoGrid=function(xa){"use strict";var ya=q.scry(fa(this._gridID),"._577")[0];if(ya){q.insertBefore(ya,xa);}else q.prependContent(fa(this._gridID),xa);};ua.prototype._getUploadID=function(xa,ya){"use strict";if(xa.upload){return xa.upload.getFile().uploadID;}else return ya.uploadID;};ua.getInstance=function(xa){"use strict";pa[xa]=pa[xa]||new ua(xa);return pa[xa];};function va(xa){if(!wa(xa))return 1;return xa.files.length;}function wa(xa){return !!xa.files&&i.isSupported();}e.exports=oa;},null);
__d("TimelineMapScrollableArea",["Animation","ArbiterMixin","CSS","DOM","Event","Run","Scroll","SimpleDrag","Style","Vector","$","copyProperties","shield"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();function t(u,v){u&&this.init(q(u),v);}r(t.prototype,h,{init:function(u,v){v=v||{};this._elem=u;this._wrap=j.find(u,'div.fbScrollableAreaWrap');this._body=j.find(this._wrap,'div.fbScrollableAreaBody');this._track=j.find(u,'div.fbScrollableAreaTrack');this._gripper=j.find(this._track,'div.fbScrollableAreaGripper');this._options=v;this.adjustGripper();this._listeners=[k.listen(this._wrap,'scroll',this._handleScroll.bind(this))];if(v.fade!==false)this._listeners.push(k.listen(u,'mouseenter',s(this.adjustGripper,this)),k.listen(u,'mouseenter',s(this.showScrollbar,this)),k.listen(u,'mousemove',this._handleMousemove.bind(this)),k.listen(u,'mouseout',s(this.hideScrollbar,this)));if(v.fade!==(void 0))this._listeners.push(k.listen(this._track,'click',this.clickToScroll.bind(this)));if(v.verticalscroll)this._listeners.push(k.listen(this._wrap,'mousewheel',this.mouseWheel.bind(this)),k.listen(this._wrap,'DOMMouseScroll',this.mouseWheel.bind(this)));this.initDrag();if(!v.persistent)l.onLeave(this.destroy.bind(this));},getRoot:function(){return this._elem;},initDrag:function(){var u=new n(this._gripper);u.subscribe('start',function(v,event){if(!((event.which&&event.which===1)||(event.button&&event.button===1)))return;this.inform('dragstart');var w=p.getEventPosition(event).x,x=this._gripper.offsetLeft,y=u.subscribe('update',function(aa,ba){var ca=p.getEventPosition(ba).x-w,da=this._elem.clientWidth,ea=this._body.offsetWidth,fa=this._track.offsetWidth,ga=da/ea*fa,ha=ea-this._wrap.offsetWidth,ia=x+ca,ja=fa-ga;ia=Math.max(Math.min(ia,ja),0);var ka=ia/ja*ha;m.setLeft(this._wrap,ka);}.bind(this)),z=u.subscribe('end',function(){u.unsubscribe(y);u.unsubscribe(z);this.inform('dragend');}.bind(this));}.bind(this));},adjustGripper:function(){var u=this._elem.clientWidth,v=this._body.offsetWidth,w=this._track.offsetWidth,x=u/v*w;if(x<w){o.set(this._gripper,'width',x+'px');var y=m.getLeft(this._wrap)/v*w;o.set(this._gripper,'left',y+'px');i.show(this._gripper);}else i.hide(this._gripper);this._checkContentBoundaries();return this;},_checkContentBoundaries:function(){var u=m.getLeft(this._wrap),v=this._wrap.scrollWidth-this._wrap.clientWidth;i.conditionClass(this._elem,'contentBefore',u>0);i.conditionClass(this._elem,'contentAfter',u<v);},destroy:function(){this._listeners.forEach(function(u){u.remove();});this._listeners.length=0;},_handleMousemove:function(event){var u=p.getElementPosition(this._track).y,v=p.getElementDimensions(this._track).y;if(Math.abs(u+v/2-p.getEventPosition(event).y)<25){this.showScrollbar(false);}else this.hideScrollbar();},_handleScroll:function(event){this.adjustGripper();if(this._options.fade!==false)this.showScrollbar();},hideScrollbar:function(){if(!this._scrollbarVisible)return this;this._scrollbarVisible=false;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}this._hideTimeout=setTimeout(function(){if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null;}this._scrollbarAnimation=new g(this._track).from('opacity',1).to('opacity',0).duration(250).ondone(i.addClass.bind(null,this._track,'invisible_elem')).go();}.bind(this),750);return this;},showScrollbar:function(u){if(this._scrollbarVisible)return this;this._scrollbarVisible=true;if(this._hideTimeout){clearTimeout(this._hideTimeout);this._hideTimeout=null;}if(this._scrollbarAnimation){this._scrollbarAnimation.stop();this._scrollbarAnimation=null;}this.adjustGripper();o.set(this._track,'opacity',1);i.removeClass(this._track,'invisible_elem');if(u!==false)this.hideScrollbar();return this;},clickToScroll:function(event){var u=p.getEventPosition(event).x,v=this._elem.clientWidth,w=this._body.offsetWidth,x=this._track.offsetWidth,y=v/w*x,z=p.getElementPosition(this._gripper);if(u>=z.x&&u<=z.x+y)return;var aa=u<z.x?-1:1,ba=this._wrap.offsetWidth*.8*aa;this.scrollBy(ba);},scrollBy:function(u){this.setScroll(m.getLeft(this._wrap)+u);},getMaxBodyOffset:function(){return this._body.offsetWidth-this._wrap.offsetWidth;},setScroll:function(u){var v=u;v=Math.max(Math.min(v,this.getMaxBodyOffset()),0);m.setLeft(this._wrap,v);},scrollIntoView:function(u){var v=this._wrap.clientWidth,w=u.offsetWidth,x=m.getLeft(this._wrap),y=x+v,z=u.offsetLeft,aa=z+w;if(z<x||v<w){this.setScroll(z);}else if(aa>y)this.setScroll(x+(aa-y));},mouseWheel:function(event){if(this.getMaxBodyOffset()<=0)return;var u=0;if(event.wheelDelta){var v=event.wheelDelta;if(event.wheelDeltaX&&event.wheelDeltaY)v=Math.abs(event.wheelDeltaX)>Math.abs(event.wheelDeltaY)?event.wheelDeltaX:event.wheelDeltaY;u=-v*10/40;}else if(event.detail)u=event.detail*10;this.scrollBy(u);event.prevent();}});e.exports=a.TimelineMapScrollableArea||t;},null);
__d("MercuryDataSources",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g={},h={add:function(i,j){g[i]=j;},get:function(i){!g[i];return g[i];}};e.exports=h;},null);
__d("glyph",["ix"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b('ix');},null);