/*!CK:4275492027!*//*1434123814,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["N2XZw"]); }

__d("GroupSellComposerActionEvents",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={COMPOSER_LOAD:"composer_load",LAUNCH_SELL_COMPOSER:"launch_sell_composer",LAUNCH_NORMAL_COMPOSER:"launch_normal_composer",COMPOSER_FILL_TITLE:"composer_fill_title",COMPOSER_FILL_PRICE:"composer_fill_price",COMPOSER_FILL_DESCRIPTION:"composer_fill_description",COMPOSER_FILL_PICKUP_NOTE:"composer_fill_pickup_note",COMPOSER_FILL_CATEGORY:"composer_fill_category",COMPOSER_SELECT_MULTIPLE_ITEMS:"composer_select_multiple_items",COMPOSER_CLEAR_MULTIPLE_ITEMS:"composer_clear_multiple_items",COMPOSER_ADD_PHOTO:"composer_add_photo",COMPOSER_DELETE_PHOTO:"composer_delete_photo",COMPOSER_SUBMIT:"composer_submit",COMPOSER_SUBMIT_ENABLED:"composer_submit_enabled",COMPOSER_FILL_DESCRIPTION_REGULAR:"composer_fill_description_regular",COMPOSER_ADD_PHOTO_REGULAR:"composer_add_photo_regular",COMPOSER_DELETE_PHOTO_REGULAR:"composer_delete_photo_regular",COMPOSER_SUBMIT_REGULAR:"composer_submit_regular",COMPOSER_INVALID_FIELD_SUBMISSION:"composer_invalid_field_submission",GROUP_POST:"group_post",GROUP_NON_FOR_SALE_POST:"group_non_for_sale_post",COMPOSER_TUTORIAL_VIDEO_SHOW:"composer_tutorial_video_show",COMPOSER_TUTORIAL_VIDEO_COMPLETE:"composer_tutorial_video_complete",COMPOSER_TUTORIAL_VIDEO_CONFIRM:"composer_tutorial_video_confirm",COMPOSER_TUTORIAL_VIDEO_CLOSE:"composer_tutorial_video_close",COMPOSER_TUTORIAL_VIDEO_NO_FLASH:"composer_tutorial_video_no_flash"};},null);
__d("PlaceTagType",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports={CITY:"city",STATE_PROVINCE:"state_province",COUNTRY:"country",PLACE:"place",EVENT:"event",RESIDENCE:"residence",TEXT:"text"};},null);
__d("ComposerXSessionInputClear",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){h.element.value=(new Date()).valueOf().toString().substr(0,10);}e.exports=g;},null);
__d("ComposerXTokenizer",["CSS","CurrentUser","DOM","DOMQuery","Token","Tokenizer"],function(a,b,c,d,e,f,g,h,i,j,k,l){b.__markCompiled&&b.__markCompiled();for(var m in l)if(l.hasOwnProperty(m))o[m]=l[m];var n=l===null?null:l.prototype;o.prototype=Object.create(n);o.prototype.constructor=o;o.__superConstructor__=l;function o(p,q,r){"use strict";l.call(this,p,q,r);this._loadingIndicatorText='';}o.prototype.createDecorativeToken=function(p,q){"use strict";var r=new k(p,this.paramName),s=r.createElement(false,q);r.setElement(s);if(h.getID()==p.uid)j.scry(s,'input[type="hidden"]').forEach(i.remove);return r;};o.prototype.setLoadingIndicatorText=function(p){"use strict";this._loadingIndicatorText=p;};o.prototype.addLoadingIndicator=function(){"use strict";if(this._loadingIndicator)return;this._loadingIndicator=this.createDecorativeToken({text:this._loadingIndicatorText},'loadingIndicator');i.appendContent(this.tokenarea,this._loadingIndicator.element);this.updateTokenarea();};o.prototype.removeToken=function(p){"use strict";if(p===this._loadingIndicator){this.removeLoadingIndicator();this.inform('removeLoadingIndicator');}else n.removeToken.call(this,p);};o.prototype.removeLoadingIndicator=function(){"use strict";if(!this._loadingIndicator)return;i.remove(this._loadingIndicator.element);this._loadingIndicator=null;this.updateTokenarea();};o.prototype.updateTokenareaVisibility=function(){"use strict";g.conditionShow(this.tokenarea,this.tokens.length!==0||this._loadingIndicator);};o.prototype.findToken=function(p){"use strict";var q=this._tokenKey(p);if(q in this.unique)return this.unique[q];return null;};o.prototype.replaceToken=function(p){"use strict";var q=this.findToken(p.getInfo());if(q){var r=q.getElement();q.setElement(p.getElement());i.replace(r,p.getElement());return true;}else{this.addToken(p);return false;}};o.prototype.reset=function(){"use strict";var p=this.getTypeahead();if(p&&p.getCore())p.getCore().reset();n.reset.call(this);};e.exports=o;},null);
__d("ComposerTagSuggestionsWaterfall",["Banzai","copyProperties"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i='composer_tag_suggestions';function j(k){"use strict";this._waterfallID=k;}j.prototype.setWaterfallID=function(k){"use strict";this._waterfallID=k;};j.prototype._logStep=function(k,l){"use strict";l=h({},l||{},{waterfall_id:this._waterfallID,step:k});g.post(i,l);return this;};j.prototype.logBegin=function(){"use strict";return this._logStep('begin');};j.prototype.logAddPhoto=function(k){"use strict";return this._logStep('add_photo',{photo:k});};j.prototype.logAddPhotos=function(k){"use strict";k.forEach(this.logAddPhoto.bind(this));};j.prototype.logRemovePhoto=function(k,l,m){"use strict";return this._logStep('remove_photo',{photo:k,tokens:l,suggestions:m});};j.prototype.logAddToken=function(k,l){"use strict";return this._logStep('add_token',{user:k,replaced_with_tag:l});};j.prototype.logRemoveToken=function(k,l){"use strict";return this._logStep('remove_token',{user:k,suggestions:l});};j.prototype.logAddSuggestion=function(k,l,m,n){"use strict";return this._logStep('add_suggestion',{photo:k,facebox:l,user:m,certainty:n});};j.prototype.logRemoveSuggestion=function(k,l,m,n){"use strict";return this._logStep('remove_suggestion',{photo:k,facebox:l,user:m,certainty:n});};j.prototype.logAddManualTag=function(k,l,m){"use strict";return this._logStep('add_tag',{photo:k,facebox:l,user:m});};j.prototype.logRemoveManualTag=function(k,l,m){"use strict";return this._logStep('remove_tag',{photo:k,facebox:l,user:m});};j.prototype.logStartPoll=function(k){"use strict";return this._logStep('start_poll',{photos:k});};j.prototype.logStopPoll=function(k,l){"use strict";return this._logStep('stop_poll',{time_spent:k,unresolved_photos:l});};j.prototype.logSubmit=function(k,l,m,n,o,p){"use strict";return this._logStep('submit',{photos:k,tokens:l,manual_tokens:m,suggestions:n,manual_tags:o,time_spent:p});};j.prototype.logFailure=function(k,l){"use strict";return this._logStep('fail',{photo:k,user:l});};e.exports=j;},null);
__d("InstanceRegistry",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){"use strict";this.instances={};this.waits=[];}g.prototype.set=function(h,i){"use strict";this.instances[h]=i;this.waits=this.waits.filter(function(j){if(this._isWaitResolved(j.names)){j.callback.apply(this,this._mapNamesToInstances(j.names));return false;}return true;}.bind(this));};g.prototype.get=function(h){"use strict";return this.instances[h];};g.prototype.remove=function(h){"use strict";delete this.instances[h];};g.prototype.waitFor=function(h,i){"use strict";if(this._isWaitResolved(h))return i.apply(this,this._mapNamesToInstances(h));this.waits.push({names:h,callback:i});};g.prototype.waitForAndRemove=function(h,i){"use strict";this.waitFor(h,function(){i.apply(this,arguments);h.forEach(this.remove.bind(this));}.bind(this));};g.prototype._isWaitResolved=function(h){"use strict";return h.every(this.instances.hasOwnProperty.bind(this.instances));};g.prototype._mapNamesToInstances=function(h){"use strict";return h.map(function(i){return this.instances[i];}.bind(this));};e.exports=new g();},null);
__d("PhotosTaggingFlyoutLoader",["ArbiterMixin","AsyncRequest","InstanceRegistry","URI","arrayContains","mixin","removeFromArray"],function(a,b,c,d,e,f,g,h,i,j,k,l,m){b.__markCompiled&&b.__markCompiled();var n=l(g);for(var o in n)if(n.hasOwnProperty(o))q[o]=n[o];var p=n===null?null:n.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=n;function q(r){"use strict";this._flyouts={};this._loading=[];this._callbacks={};this._targetID=r;}q.prototype.get=function(r,s){"use strict";if(this._isLoaded(r))return s(this._flyouts[r]);this._callbacks[r]=this._callbacks[r]||[];if(!this._isLoading(r))this._load(r);this._callbacks[r].push(s);};q.prototype.whenLoaded=function(r,s){"use strict";if(this._isLoaded(r))return s(this._flyouts[r]);this._callbacks[r]=this._callbacks[r]||[];this._callbacks[r].push(s);};q.prototype._load=function(r){"use strict";if(this._isLoading(r))return;this._loading.push(r);new h().setURI(new j('/ajax/photos/tagging-flyout/').addQueryData({photo:r,target:this._targetID,recognitionFeature:'composer_facerec'})).setHandler(function(){i.waitForAndRemove(['PhotosTaggingFlyout_'+r],function(s){if(!this._isLoading(r))return;this.inform('loaded',s);this._flyouts[r]=s;this._callbacks[r].forEach(function(t){t(s);});delete this._callbacks[r];}.bind(this));}.bind(this)).setFinallyHandler(function(){m(this._loading,r);}.bind(this)).send();};q.prototype._isLoading=function(r){"use strict";return k(this._loading,r);};q.prototype._isLoaded=function(r){"use strict";return !!this._flyouts[r];};q.prototype.remove=function(r){"use strict";if(this._isLoaded(r))this._flyouts[r].cleanup();delete this._flyouts[r];delete this._callbacks[r];m(this._loading,r);};q.prototype.cleanup=function(){"use strict";Object.keys(this._flyouts).forEach(this.remove.bind(this));Object.keys(this._callbacks).forEach(this.remove.bind(this));};e.exports=q;},null);
__d("AttachmentWithPhotosTaggingFlyoutMixin",["Event","Arbiter","PhotoTagStore","ComposerTagSuggestionsWaterfall","PhotosTaggingFlyoutLoader","BanzaiODS","FaceRecognitionController","ComposerXNUX","DOM","CSS","cx","csx","DOMQuery","isEmpty","fbt","Tooltip","Parent","Form","SubscriptionsHandler","copyProperties","PhotosUploadWaterfallXMixin","AsyncRequest","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();var da=[];e.exports=z(aa,{initTaggingFlyoutMixin:function(ea,fa){this._attachment=ea;this._taggingFlyoutData={};this._taggingFlyoutData.root=ea.getRoot();this._taggingFlyoutData.gridID=ea.getGridID();this._taggingFlyoutData.uploadArea=ea.getUploadArea();this._taggingFlyoutData.submitButton=ea.getSubmitButton();this._taggingFlyoutData.tagger=ea.getTagger();this._taggingFlyoutData.config=fa;this._taggingFlyoutData.xyTagInputs={};this._taggingFlyoutData.subscriptions=new y();this._initTaggingFlyout();},setFaceRecSubmitButtonLock:function(ea){this._taggingFlyoutData.faceRecSubmitButtonLock=ea;},initTaggingFlyoutWithComponents:function(){this._taggingFlyoutData.scrollableArea=this._attachment.getScrollableArea();this._taggingFlyoutData.subscriptions.addSubscriptions(h.subscribe('multi-upload/image-removed/'+this._taggingFlyoutData.gridID,this._doHandleImageRemoved.bind(this)),h.subscribe('multi-upload/images-added/'+this._taggingFlyoutData.gridID,this._doHandleImageAdded.bind(this)),this._taggingFlyoutData.recognitionController.subscribe('recognition',this._doHandleRecognitionResult.bind(this)),this._taggingFlyoutData.recognitionController.subscribe('photo',this._doHandlePhotoRecognitionDone.bind(this)),this._taggingFlyoutData.recognitionController.subscribe('done',function(ga,ha){this._taggingFlyoutData.faceRecSubmitButtonLock.unlock();this._setSubmitButtonTooltip('');ha.unresolved.forEach(function(ia){this._taggingFlyoutData.flyoutLoader.whenLoaded(ia,function(ja){ja.reset();});this._taggingFlyoutData.facerecLogger.bump('facerec_queries_fail');this._taggingFlyoutData.tagSuggestionsWaterfall.logFailure(ia,ha.user);this._doHandlePhotoRecognitionDone(ga,{photo:ia,faceboxes:[],recognitions:0});},this);this._taggingFlyoutData.facerecLogger.bump('facerec_queries_done');this._taggingFlyoutData.tagSuggestionsWaterfall.logStopPoll(Date.now()-this._taggingFlyoutData.pollLastStartedTimestamp,ha.unresolved.length);}.bind(this)));var ea=this.getComponentInstance('withtagger');if(ea)this._taggingFlyoutData.subscriptions.addSubscriptions(ea.subscribe('removeToken',this._doHandleTokenRemoved.bind(this)));i.getInstance().clear();var fa=this.getWaterfallID();this._taggingFlyoutData.tagSuggestionsWaterfall=new j(fa);this._taggingFlyoutData.tagSuggestionsWaterfall.logBegin();this._taggingFlyoutData.flowBeginTimestamp=Date.now();this._taggingFlyoutData.recognitionController.setWaterfallID(fa);},cleanupTaggingFlyout:function(){this._taggingFlyoutData.flyoutLoader.cleanup();if(this._taggingFlyoutData.config.taggingFlyoutNUXDialog)n.onCleanup(this._taggingFlyoutData.config.taggingFlyoutNUXDialog);this.releaseSubscriptions();this.engageSubscriptions();},resetTaggingFlyout:function(){i.getInstance().clear();if(this._taggingFlyoutData){this._taggingFlyoutData.recognitionController.stop();for(var ea in this._taggingFlyoutData.xyTagInputs)o.remove(this._taggingFlyoutData.xyTagInputs[ea]);this._taggingFlyoutData.xyTagInputs={};}},getWaterfallID:function(){throw "Classes using AttachmentWithPhotosTaggingFlyoutMixin "+"should implement getWaterfallID";},releaseSubscriptions:function(){this._taggingFlyoutData.subscriptions.release();},engageSubscriptions:function(){this._taggingFlyoutData.subscriptions.engage();},addSubscriptions:function(){for(var ea=[],fa=0,ga=arguments.length;fa<ga;fa++)ea.push(arguments[fa]);var ha=this._taggingFlyoutData.subscriptions;ha.addSubscriptions.apply(ha,ea);},getSubscriptions:function(ea){return this._taggingFlyoutData.subscriptions;},logWithTaggingData:function(ea,fa){var ga=0,ha=this.getComponentInstance('withtagger');if(ha){var ia=i.getInstance(),ja=ha.getTokens();ga=ja.filter(function(ma){return !ia.userHasDirtyTags(ma.info.uid);}).length;var ka=ia.getAllTags(),la=ka.filter(function(ma){return ma.source=='composerx_suggestions';});this._taggingFlyoutData.tagSuggestionsWaterfall.logSubmit(ea,ja.length,ga,la.length,ka.length-la.length,Date.now()-this._taggingFlyoutData.flowBeginTimestamp);}return ga;},_initTaggingFlyout:function(){this._taggingFlyoutData.flyoutLoader=new k(this._taggingFlyoutData.config.targetID);this._taggingFlyoutData.flyoutLoader.subscribe('loaded',function(ea,fa){this._setupTaggingFlyout(fa);}.bind(this));this._taggingFlyoutData.facerecLogger={bump:function(ea,fa){l.bumpEntityKey('composer_facerec_suggestions',ea,fa);}};this._taggingFlyoutData.recognitionController=new m({targetID:this._taggingFlyoutData.config.targetID,targetIsPage:this._taggingFlyoutData.config.targetIsPage});},_setupTaggingFlyout:function(ea){da.push(ea);if(!this._getPhotoGridItem(ea.getPhotoID()))return;this._taggingFlyoutData.subscriptions.addSubscriptions(ea.subscribe('show',this._onTaggingFlyoutShow.bind(this,ea)),ea.subscribe('beforehide',this._onTaggingFlyoutHide.bind(this,ea)),ea.subscribe('confirm',this._onTaggingFlyoutConfirmed.bind(this,ea)),ea.subscribe('select',this._onTaggingFlyoutSelect.bind(this,ea)),ea.subscribe('unselect',this._onTaggingFlyoutUnselect.bind(this,ea)));},_onTaggingFlyoutShow:function(ea,fa,ga){da.forEach(function(ha){if(ha!=ea)ha.hide();});if(this._taggingFlyoutData.config.taggingFlyoutNUXDialog)n.acknowledgeDialog(n.TAGGING_FLYOUT_NUX,this._taggingFlyoutData.config.taggingFlyoutNUXDialog);ea.setNextButtonVisibility(!this._findNextTaggableGridItem(this._getPhotoGridItem(ea.getPhotoID())));},_onTaggingFlyoutHide:function(ea,fa,ga){p.removeClass(ea.getContext(),"_58pl");p.conditionClass(this._taggingFlyoutData.uploadArea,"_58pk",s.scry(this._taggingFlyoutData.uploadArea,"._58pl").length);},_onTaggingFlyoutConfirmed:function(ea,fa,ga){var ha=this._findNextTaggableGridItem(this._getPhotoGridItem(ea.getPhotoID()));if(!ha)return;if(this._taggingFlyoutData.scrollableArea)this._taggingFlyoutData.scrollableArea.scrollIntoView(ha);p.addClass(this._taggingFlyoutData.uploadArea,"_58pk");p.addClass(ha,"_58pl");this._getTaggingFlyout(ha.getAttribute('data-fbid'),function(ia){ia.show(ha);});},_onTaggingFlyoutSelect:function(ea,fa,ga){p.addClass(this._getPhotoGridItem(ea.getPhotoID()),"_57vj");var ha=i.getInstance().userHasDirtyTags(ga.user);if(!ha)this._taggingFlyoutData.facerecLogger.bump('suggestion_tags_added');i.getInstance().storeTagWithOptions(ga.photo,ga.user,ga.facebox.x,ga.facebox.y,{fbid:ga.photo,name:ga.name,subject:ga.user,from_facebox:true,facebox:ga.facebox.fbid,source:'composerx_flyout'});this._taggingFlyoutData.tagSuggestionsWaterfall.logAddManualTag(ga.photo,ga.facebox.fbid,ga.user);var ia=this.getComponentInstance('withtagger');if(ia)if(!ha){var ja=ia.replaceToken(ia.createDecorativeToken({uid:ga.user,text:ga.name},'faceSuggestion'));this._taggingFlyoutData.tagSuggestionsWaterfall.logAddToken(ga.user,ja);}this._updateXYTagInputs();},_onTaggingFlyoutUnselect:function(ea,fa,ga){this._fireDismissRequest([{facebox:ga.facebox,log_data:{tagee:ga.user,is_first:true}}]);var ha=i.getInstance().removeTag(ga.photo,ga.user);if(t(ha))return;var ia=this._taggingFlyoutData.tagSuggestionsWaterfall;ha.forEach(function(la){if(la.source=='composerx_suggestions'){ia.logRemoveSuggestion(la.fbid,la.facebox,la.subject,la.certainty);}else ia.logRemoveManualTag(la.fbid,la.facebox,la.subject);});p.conditionClass(this._getPhotoGridItem(ea.getPhotoID()),"_57vj",!t(i.getInstance().getPhotoTags(ga.photo)));var ja=i.getInstance().userHasDirtyTags(ga.user),ka=this.getComponentInstance('withtagger');if(ka&&!ja){ka.removeToken(ka.findToken({uid:ga.user}));this._taggingFlyoutData.tagSuggestionsWaterfall.logRemoveToken(ga.user,0);}this._updateXYTagInputs();},_doHandleImageRemoved:function(ea,fa){this._taggingFlyoutData.flyoutLoader.remove(fa);var ga=0,ha=[],ia=this.getComponentInstance('withtagger');if(ia){ha=Object.keys(i.getInstance().getPhotoTags(fa));i.getInstance().removeAllTagsFromPhoto(fa);ha.forEach(function(ja){if(!i.getInstance().userHasDirtyTags(ja)){ga++;ia.removeToken(ia.findToken({uid:ja}));}});}this._taggingFlyoutData.tagSuggestionsWaterfall.logRemovePhoto(fa,ga,ha.length);this._updateXYTagInputs();da.forEach(function(ja){return ja.hide();});},_doHandleImageAdded:function(ea,fa){if(fa.disableRecognition)return;Object.keys(fa.fbids).forEach(function(ga){var ha=fa.fbids[ga],ia=this._getPhotoGridItem(ha);if(ia)p.addClass(ia,"_57vh");},this);this._taggingFlyoutData.tagSuggestionsWaterfall.logAddPhotos(ca(fa.fbids));this._taggingFlyoutData.facerecLogger.bump('photos_queried');if(this.getComponent('withtagger')&&!this._taggingFlyoutData.config.hideWithTagger)this._taggingFlyoutData.tagger.eventuallySwitchToTagger('with');if(!this._taggingFlyoutData.config.applyTagSuggestionsDelay)this._taggingFlyoutData.faceRecSubmitButtonLock.lock();this._taggingFlyoutData.recognitionController.start(ca(fa.fbids));this._setSubmitButtonTooltip(u._("Processando"));this._taggingFlyoutData.pollLastStartedTimestamp=Date.now();this._taggingFlyoutData.tagSuggestionsWaterfall.logStartPoll(Object.keys(fa.fbids).length);},_doHandleRecognitionResult:function(ea,fa){var ga=fa.facebox,ha=fa.recognition,ia=i.getInstance().userHasDirtyTags(ha.user.fbid);this._taggingFlyoutData.facerecLogger.bump('xy_tags_added');this._taggingFlyoutData.tagSuggestionsWaterfall.logAddSuggestion(fa.photo,ga.fbid,ha.user.fbid,ha.certainty);if(!ia)this._taggingFlyoutData.facerecLogger.bump('suggestion_tags_added');i.getInstance().storeTagWithOptions(fa.photo,ha.user.fbid,ga.x,ga.y,{fbid:fa.photo,name:ha.user.name,subject:ha.user.fbid,from_facebox:true,facebox:ga.fbid,certainty:ha.certainty,source:'composerx_suggestions',timestamp:Date.now()});var ja=this.getComponentInstance('withtagger');if(ja){if(!ia){var ka=ja.replaceToken(ja.createDecorativeToken({uid:ha.user.fbid,text:ha.user.name},this._taggingFlyoutData.config.additionalTokensGlyph));this._taggingFlyoutData.tagSuggestionsWaterfall.logAddToken(ha.user.fbid,ka);}this._taggingFlyoutData.tagger.eventuallySwitchToTagger('with');}setTimeout(this._updateXYTagInputs.bind(this),this._taggingFlyoutData.config.applyTagSuggestionsDelay?500:0);},_doHandlePhotoRecognitionDone:function(ea,fa){var ga=fa.photo,ha=this._getPhotoGridItem(ga);if(!ha)return;p.removeClass(ha,"_57vh");if(!this._taggingFlyoutData.config.useTaggingFlyout)return;p.addClass(ha,"_57vi");p.conditionClass(ha,"_57vj",fa.recognitions);p.conditionClass(ha,"_57vk",fa.faceboxes.length);if(fa.recognitions&&this._taggingFlyoutData.config.taggingFlyoutNUXDialog&&!this._taggingFlyoutData.taggingFlyoutNUXShown){this._scrollIntoView(ha);n.onInit(this._taggingFlyoutData.config.taggingFlyoutNUXDialog,ha,n.TAGGING_FLYOUT_NUX);this._taggingFlyoutData.taggingFlyoutNUXShown=true;}this._taggingFlyoutData.subscriptions.addSubscriptions(g.listen(ha,'click',function(ia){if(p.hasClass(ia.target,'fbVaultGridPhotoItemRemoveButton')||p.hasClass(ia.target,'fbVaultGridPhotoItemEditButton')||p.hasClass(ia.target,"_24iq"))return;p.addClass(this._taggingFlyoutData.uploadArea,"_58pk");p.addClass(ha,"_58pl");this._getTaggingFlyout(ga,function(ja){ja.toggle(ha);});}.bind(this)));},_setSubmitButtonTooltip:function(ea){var fa=s.find(this._taggingFlyoutData.root,"._yo");if(ea){v.set(fa,ea,'above','center');}else{v.remove(fa);fa.setAttribute('aria-label',u._("Publicar"));}},_doHandleTokenRemoved:function(ea,fa){var ga=i.getInstance(),ha=fa.info.uid,ia=this._taggingFlyoutData;if(ga.userHasDirtyTags(ha)){var ja=ga.userDirtyTagsCount(ha);ia.tagSuggestionsWaterfall.logRemoveToken(ha,ja);ia.facerecLogger.bump('suggestion_tokens_removed');ia.facerecLogger.bump('xy_tags_removed',ja);}var ka=[];ga.removeAllNewTagsOfUser(ha).forEach(function(la){ka.push({facebox:la.facebox,log_data:{tagee:la.subject,is_first:true}});if(ia.config.useTaggingFlyout){if(!ga.photoHasTags(la.fbid))p.removeClass(this._getPhotoGridItem(la.fbid),"_57vj");ia.flyoutLoader.whenLoaded(la.fbid,function(ma){ma.getFaceboxInstance(la.facebox).reset();});}if(la.source=='composerx_suggestions'){ia.tagSuggestionsWaterfall.logRemoveSuggestion(la.fbid,la.facebox,la.subject,la.certainty);}else ia.tagSuggestionsWaterfall.logRemoveManualTag(la.fbid,la.facebox,la.subject);}.bind(this));this._fireDismissRequest(ka);this._updateXYTagInputs();},_updateXYTagInputs:function(){var ea=w.byTag(this._taggingFlyoutData.submitButton,'form');for(var fa in this._taggingFlyoutData.xyTagInputs)o.remove(this._taggingFlyoutData.xyTagInputs[fa]);var ga=i.getInstance().getAllTags();if(this._taggingFlyoutData.config.applyTagSuggestionsDelay)ga=ga.filter(function(ha){return !ha.timestamp||(ha.timestamp+500<=Date.now());});x.createHiddenInputs({xy_tags:ga},ea,this._taggingFlyoutData.xyTagInputs);},_getPhotoGridItem:function(ea){return s.scry(this._taggingFlyoutData.uploadArea,'.fbVaultGridItem[data-fbid="'+ea+'"]')[0];},_findNextTaggableGridItem:function(ea){var fa=s.scry(this._taggingFlyoutData.uploadArea,'.fbVaultGridItem'),ga=fa.indexOf(ea);while(++ga<fa.length)if(p.hasClass(fa[ga],"_57vk"))break;return fa[ga];},_getTaggingFlyout:function(ea,fa){this._taggingFlyoutData.flyoutLoader.get(ea,fa);},_fireDismissRequest:function(ea){if(ea.length>0)new ba().setURI('/ajax/dismiss_tag_suggest.php').setMethod('POST').setData({facebox_logs:ea,closing_source:'composerx_suggestions',closing_action:'no'}).setAllowCrossPageTransition(true).send();},_scrollIntoView:function(ea){if(this._taggingFlyoutData.scrollableArea)this._taggingFlyoutData.scrollableArea.scrollIntoView(ea);}});},null);
__d("ComposerXPrivacyWidgetTags",["Arbiter","CurrentUser","PrivacySelectorBase","copyProperties","getObjectValues"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();function l(m){"use strict";var n=m.getComponent('mainprivacywidget');if(!n){this._subscriptions=[];return null;}this._privacyWidget=n.element;this._privacyWidgetInstance=n.instance&&n.instance.getInstance().getInstance();this._mentionsInput=m.getComponent('maininput').instance;this._placeTypeahead=m.getComponent('placetagger')?m.getComponent('placetagger').instance:null;this._friendsTokenizer=m.getComponent('withtagger')?m.getComponent('withtagger').instance:null;this._init();}l.prototype._init=function(){"use strict";this._subscriptions=[this._mentionsInput.subscribe('update',this._informChangedTags.bind(this)),g.subscribe('composer/attendingMinutiaeAdded',this._informAttendingMinutiaeAdded.bind(this)),g.subscribe('composer/attendingMinutiaeRemoved',this._informAttendingMinutiaeRemoved.bind(this))];if(this._placeTypeahead){this._subscriptions.push(this._placeTypeahead.subscribe('select',this._onPlaceSelect.bind(this)));this._subscriptions.push(g.subscribe('Events/autoSuggestionSelected',this._onPlaceSelect.bind(this)));this._subscriptions.push(this._placeTypeahead.subscribe('unselect',this._onPlaceUnselect.bind(this)));}if(this._friendsTokenizer)this._subscriptions.push(this._friendsTokenizer.subscribe(['addToken','removeToken'],this._informChangedTags.bind(this)));this._informChangedTags();};l.prototype._getTaggedNamesForAudience=function(){"use strict";var m={},n=this._mentionsInput.getMentions();for(var o in n)if(n[o].type=='user')m[o]=n[o].text;if(this._friendsTokenizer)this._friendsTokenizer.getTokens().map(function(p){m[p.getValue()]=p.getText();});delete m[h.getID()];return k(m);};l.prototype._onPlaceSelect=function(m,n){"use strict";this._placeType=n.selected.place_type;this._informChangedTags();};l.prototype._onPlaceUnselect=function(m,n){"use strict";this._placeType=null;this._informChangedTags();};l.prototype._informAttendingMinutiaeAdded=function(m,n){"use strict";if(this._privacyWidgetInstance instanceof i)this._privacyWidgetInstance.addAttendingMinutiaePrivacySelectorIfNecessary(n.info.original_id);};l.prototype._informAttendingMinutiaeRemoved=function(m,n){"use strict";if(this._privacyWidgetInstance instanceof i)this._privacyWidgetInstance.removeAttendingMinutiaePrivacySelectorIfNecessary(n.info.original_id);};l.prototype._informChangedTags=function(){"use strict";var m=[];if(this._friendsTokenizer)m=this._friendsTokenizer.getTokens();var n=null;if(this._placeType==='Event')n=this._placeTypeahead.getCore().getHiddenValue();var o={withTags:m,mention:this._mentionsInput.getMentions(),eventTag:n};g.inform('Composer/changedtags',o);if(this._privacyWidgetInstance&&this._privacyWidgetInstance instanceof i)this._privacyWidgetInstance.informTagsChanged(o);};l.prototype.destroy=function(){"use strict";while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();};j(l.prototype,{_subscriptions:null,_placeType:null});e.exports=l;},null);
__d("ComposerXMediaUploadAttachment",["Arbiter","Button","ComposerXAttachment","ComposerXAttachmentUtils","ComposerXAttachmentButtonBarState","ComposerXAttachmentPrefillMixin","ComposerXPrivacyWidgetTags","ComposerXSessionIDInserter","Dialog","DOM","DOMQuery","Event","PagesBanzaiLogger","PagesComposerEntryLogger","Parent","SubscriptionsHandler","classWithMixins","copyProperties","csx","cx","ge","fbt","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca){b.__markCompiled&&b.__markCompiled();var da=w(i,ca(l));for(var ea in da)if(da.hasOwnProperty(ea))ga[ea]=da[ea];var fa=da===null?null:da.prototype;ga.prototype=Object.create(fa);ga.prototype.constructor=ga;ga.__superConstructor__=da;function ga(ha,ia,ja){"use strict";da.call(this);this._root=ha;this._tagger=ia;this._config=ja;this._hasSelected=false;this._subscriptions=new v();this._submitButton=p.find(this._root,"._yo");}ga.prototype.getRoot=function(){"use strict";return this._root;};ga.prototype.getUploadArea=function(){"use strict";return this._uploadArea;};ga.prototype.getSubmitButton=function(){"use strict";return this._submitButton;};ga.prototype.getTagger=function(){"use strict";return this._tagger;};ga.prototype.initWithComponents=function(){"use strict";this._uploadArea=p.find(this._root,"div._yn");this._initFileInput();var ha=this.getComponent('maininput');j.initMentions(ha,this._config.mentionsPlaceholder,this.getComposerID(),{dontFocusMentions:this._config.dontFocusMentions});var ia=q.find(ha.element,'textarea.input');if(!ia.value&&this._config.targetIsPage){this._pagesComposerEntryLogger=new t(this._config.targetID);this._pagesComposerEntryLogger.registerForContentEntryEvents(ia);}if(this._config.prefill)this._initPrefill(q.find(this.getComponent('maininput').element,'textarea.input'),this._config.prefill);this._root.action=this._config.photoEndpoint;this._tagger.init(this);this._privacyWidgetTags=new m(this);k.trackCityChanges(this);g.inform('ComposerXMediaUpload/start');var ja=this._config.fileForm;this._subscriptions.addSubscriptions(ja.subscribe('submit',function(){n.insertSessionInput(ja.getRoot());}.bind(this)));if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);g.inform('composer/render_pab_nux');};ga.prototype.persistUploadArea=function(){"use strict";return false;};ga.prototype.cleanup=function(){"use strict";this._tagger.cleanup();this._privacyWidgetTags&&this._privacyWidgetTags.destroy();this._privacyWidgetTags=null;this._subscriptions.release();this._subscriptions.engage();if(this._pagesComposerEntryLogger)this._pagesComposerEntryLogger.unregister();};ga.prototype.reset=function(){"use strict";this._tagger.reset();this._resetFileInput();if(this._config.prefill)this._resetPrefill();};ga.prototype._resetFileInput=function(){"use strict";p.replace(this._fileInput,this._fileInputCopy);this._initFileInput();};ga.prototype.canSwitchAway=function(){"use strict";return !u.byClass(this._root,'async_saving');};ga.prototype._setSubmitButtonEnabled=function(ha){"use strict";h.setEnabled(this._submitButton,ha);};ga.prototype._isImageFile=function(){"use strict";return !!this._config.imageExtensions[this._getFileExtension()];};ga.prototype._getFileExtension=function(){"use strict";return this._fileInput.value.split('.').pop().toLowerCase();};ga.prototype._initFileInput=function(){"use strict";this._fileInput=p.find(this._root,"._n");this._fileInputCopy=this._fileInput.cloneNode(false);this._subscriptions.addSubscriptions(r.listen(this._fileInput,'change',this._onFileChange.bind(this)));};ga.prototype._onFileChange=function(){"use strict";if(this._isImagesOnly()&&!this._isImageFile()){new o().setTitle(ba._("Arquivo de imagem inv\u00e1lido")).setBody(ba._("Envie um arquivo de imagem v\u00e1lido.")).setModal(true).setButtons([o.OK]).show();this._resetFileInput();}else{p.setContent(aa('fbComposerUploadMediaFilename'),this._fileInput.value.split('\\').pop());this._setSubmitButtonEnabled(!!this._fileInput.value);}var ha=this._getPageSelectLoggingData();if(ha&&!this._hasSelected&&this._fileInput.value){this._hasSelected=true;s.logData(ha,null);}};ga.prototype._isImagesOnly=function(){"use strict";return !!this._config.imagesOnly;};ga.prototype._getPageSelectLoggingData=function(){"use strict";return this._config.pageSelectLoggingData;};x(ga.prototype,{_privacyWidgetTags:null,attachmentClassName:"_92"});e.exports=ga;},null);
__d("Lockable",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(i,j){"use strict";this._onUnlock=i;this._onLock=j;this._isLocked=false;this._locks=[];}g.prototype.getLock=function(){"use strict";var i=new h(this._onLockChanged.bind(this));this._locks.push(i);return i;};g.prototype._onLockChanged=function(){"use strict";var i=this._locks.some(function(j){return j.isLocked();});if(i!==this._isLocked){this._isLocked=i;if(i){this._onLock();}else this._onUnlock();}};function h(i){"use strict";this._isLocked=false;this._onChange=i;}h.prototype.lock=function(){"use strict";if(!this._isLocked){this._isLocked=true;this._onChange();}return this;};h.prototype.unlock=function(){"use strict";if(this._isLocked){this._isLocked=false;this._onChange();}return this;};h.prototype.isLocked=function(){"use strict";return this._isLocked;};e.exports=g;},null);
__d("XComposerXAddPhotoItemController",["XController"],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();e.exports=b("XController").create("\/composerx\/photo\/item\/",{photo_fbid:{type:"Int",required:true},grid_id:{type:"String",required:true},image_height:{type:"Int",required:true},image_width:{type:"Int",required:true}});},null);
__d("ComposerXMediaUploadPlusAttachment",["Event","Arbiter","ComposerXAttachmentUtils","ComposerXController","ComposerXDragDrop","ComposerXMediaUploadAttachment","CSS","DOM","Lockable","Parent","PhotosMultiUploadInput","PUWApplications","AsyncRequest","csx","cx","ge","mixin","classWithMixins","AttachmentWithPhotosTaggingFlyoutMixin","PUWSteps","Scroll","StickerPhotoEditor","SubscriptionsHandler","XComposerXAddPhotoItemController"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da){b.__markCompiled&&b.__markCompiled();var ea=x(l,w(y));for(var fa in ea)if(ea.hasOwnProperty(fa))ha[fa]=ea[fa];var ga=ea===null?null:ea.prototype;ha.prototype=Object.create(ga);ha.prototype.constructor=ha;ha.__superConstructor__=ea;function ha(ia,ja,ka){"use strict";ea.call(this,ia,ja,ka);this._cameraIcon=null;this._eventSuggestionQuerySent=false;this._submitButtonLockable=null;this._cleaningUp=false;this._resetting=false;if(this._config.warningDialog)this._config.warningDialog.setContext(this._submitButton);this._photosToInit=this._config.existingPhotos;if(this._config.qualityChooser)this._config.qualityChooser.addListener('checkboxChanged',function(la){this.getScrollableArea().getUploadItem().getUploadInput().onQualitySettingChanged(la);new s().setURI('/ajax/photos/upload/settings/').setData({composer_resolution:la?'high':'standard'}).send();}.bind(this));}ha.prototype.getPhotoCount=function(){"use strict";return this.getScrollableArea().getPhotoCount();};ha.prototype.getGrid=function(){"use strict";return this._grid;};ha.prototype.getGridID=function(){"use strict";return this._gridID;};ha.prototype.getWaterfallID=function(){"use strict";if(this._grid){return this._grid.getWaterfallID();}else return q.getWaterfallID(this._gridID);};ha.prototype.getWaterfallAppName=function(){"use strict";return r.WEB_COMPOSER;};ha.prototype.getScrollableArea=function(){"use strict";return this.getComponent('upload_area').instance;};ha.prototype.initWithComponents=function(){"use strict";ga.initWithComponents.call(this);this._gridID=this._uploadArea.id;var ia=this.getScrollableArea().getUploadItem();if(ia&&ia.getUploadInput().getGrid)this._grid=ia.getUploadInput().getGrid();this.initTaggingFlyoutMixin(this,this._config);this.addSubscriptions(h.subscribe('multi-upload/images-upload-start/'+this._gridID,this._onUploadStart.bind(this)),h.subscribe('multi-upload/composer-reset/'+this._gridID,this._handleMultiUploadComposerReset.bind(this)),h.subscribe('multi-upload/images-added/'+this._gridID,this._handleImageAdded.bind(this)),h.subscribe('multi-upload/image-removed/'+this._gridID,this._handleImageRemoved.bind(this)),g.listen(this._root,'submit',this._onSubmit.bind(this),g.Priority.URGENT));if(this.supportsDragDrop()&&!this._dragdrop)this._dragdrop=new k(this._root,this.getComposerID());this.initTaggingFlyoutWithComponents();this._cameraIcon=this.getComponent('cameraicon');this._moreLink=n.find(this._root,"._2oh");m.conditionShow(this._moreLink,this._config.isMediaModifiable);var ja=[this._moreLink];this._cameraIcon&&ja.push(this._cameraIcon.element);this.getScrollableArea().initialize(ja,this._config,this._root,this._gridID,this.getComposerID());this.getScrollableArea().setPlaceholderHandler(this._setPlaceholders.bind(this));this._resetSubmitButtonLockable();var ka;if(!this._config.allowNoMedia){ka=this._submitButtonLockable.getLock().lock();this.getScrollableArea().setEnableComposerHandler(function(la){if(la){h.inform('ComposerXMediaUploadPlusAttachment/submitEnabled');ka.unlock();}else{h.inform('ComposerXMediaUploadPlusAttachment/submitDisabled');ka.lock();}}).setAllMediaRemovedHandler(function(){if(!this._cleaningUp&&!this._resetting)if(j.hasAttachmentWithClassName(this._root,"_4j")){j.getAttachment(this._root,'/ajax/composerx/attachment/status/');}else if(this._config.editPostID)j.getAttachment(this._root,this._config.statusAttachmentEndpoint);}.bind(this));}else{ka=this._submitButtonLockable.getLock().unlock();this.getScrollableArea().setEnableComposerHandler(function(la){h.inform('ComposerXMediaUploadPlusAttachment/submitEnabled');ka.unlock();});}if(!this._fileHandler)this._fileHandler=h.subscribe('ComposerXFilesStore/filesAdded/'+this._composerID+'/mediaupload',function(la,ma){if(!ma.fileInput.getValue())return;if(this._grid){this._grid.doFileUpload(ma.fileInput);}else q.doFileUpload(this._gridID,ma.fileInput);}.bind(this));if(!this._cameraPhotoHandler)this._cameraPhotoHandler=h.subscribe('ComposerXFilesStore/filesAdded/'+this._composerID+'/cameraphoto',function(la,ma){var na=da.getURIBuilder().setInt('photo_fbid',ma.photoFBID).setString('grid_id',this._gridID).setInt('image_width',this._config.thumbnailSize.width).setInt('image_height',this._config.thumbnailSize.height).getURI();new s(na).send();}.bind(this));if(this.supportsDragDrop()&&!this._dragdropHandler){this._dragdropHandler=h.subscribe('ComposerXFilesStore/filesDropped/'+this._composerID+'/mediaupload',function(la,ma){if(this._grid){this._grid.onFilesDrop(ma.files,ma.method);}else q.onFilesDrop(this._gridID,ma.files);}.bind(this));k.handleDragEnterAndLeave(this._root);}if(this._photosToInit){this._photosToInit.forEach(function(la){h.inform(['multi-upload/images-added/'+this._gridID,'multi-upload/images-added'],{fbids:{'0':''+la},tagInfo:{},disableRecognition:true,initialPhoto:true});}.bind(this));this._photosToInit=null;}m.conditionShow(this.getScrollableArea().getUploadArea().getRoot(),this._config.isMediaModifiable||this.getPhotoCount()>0);if(this._config.postActionsButton!=null)this._config.postActionsButton.initHiddenInputs(this.getComponent('pabhiddeninputs').instance);};ha.prototype.reset=function(){"use strict";this._resetting=true;this.resetTaggingFlyout();this.getTagger().reset();this._eventSuggestionQuerySent=false;if(this._config.isAutoEventSuggestionEnabled){var ia=v('event_tagging_auto_suggestion');ia&&m.hide(ia);}this._resetting=false;if(this._config.prefill)this._resetPrefill();};ha.prototype._handleImageAdded=function(ia,ja){"use strict";this.getScrollableArea().handleImageAdded(ia,ja);this._checkPhotoMaxSelect();if(this._config.preShowWithTagger&&this.getComponent('withtagger'))this.getTagger().eventuallySwitchToTagger('with');if(ja.tagInfo.exifLocation&&ja.tagInfo.exifLocation.rank_place_tagger&&ja.tagInfo.exifLocation.latitude&&ja.tagInfo.exifLocation.longitude){var ka=this.getComponent('placetagger');if(ka&&ka.instance){ka.instance.getCore().setLocation(ja.tagInfo.exifLocation);if(ja.tagInfo.exifLocation.flow_to_place_tagger)this.getTagger().eventuallySwitchToTagger('place');}}if(!this._config.isAutoEventSuggestionEnabled)return;if(this.getComponent('hiddenplaceinput').element.value)return;if(this._eventSuggestionQuerySent)return;this._sendEventsSuggestionRequest({fbid:ja.fbids[Object.keys(ja.fbids)[0]],anchor_id:'composerCityTagger'});this._eventSuggestionQuerySent=true;};ha.prototype._handleImageRemoved=function(ia,ja){"use strict";this.getScrollableArea().handleImageRemoved(ia,ja);this._checkPhotoMaxSelect();};ha.prototype._handleMultiUploadComposerReset=function(){"use strict";this._resetting=true;this.getScrollableArea().reset();this._resetting=false;};ha.prototype.cleanup=function(){"use strict";this._cleaningUp=true;this.cleanupTaggingFlyout();ga.cleanup.call(this);if(!this.persistUploadArea())this.getScrollableArea().cleanup();this._moreLinkListener&&this._moreLinkListener.remove();if(this.getComponent('withtagger'))this._withTaggerIconListener&&this._withTaggerIconListener.remove();if(this._fileHandler){this._fileHandler.unsubscribe();this._fileHandler=null;}if(this._dragdrop){this._dragdrop.deactivate();this._dragdrop=null;}this._cleaningUp=false;};ha.prototype.canSwitchAway=function(){"use strict";return !p.byClass(this._root,'async_saving');};ha.prototype.supportsDragDrop=function(){"use strict";return this._config.maxSelect!==1;};ha.prototype._setPlaceholders=function(ia,ja){"use strict";i.setStickyPlaceholderForMentions(this.getComponent('maininput'),ia);i.setStickyPlaceholderForTypeahead(this.getComponent('placetagger').element,ja);this._cameraIcon&&m.conditionClass(this._cameraIcon.element,"_1dsx",this.getScrollableArea().getTotalImageCount()>0);};ha.prototype._resetSubmitButtonLockable=function(){"use strict";this._submitButtonLockable=new o(this._setSubmitButtonEnabled.bind(this,true),this._setSubmitButtonEnabled.bind(this,false));this._overImageSelectionLimitLock=this._submitButtonLockable.getLock();this.setFaceRecSubmitButtonLock(this._submitButtonLockable.getLock());};ha.prototype._onUploadStart=function(){"use strict";var ia=n.find(this._root,'.fbScrollableAreaWrap');aa.setLeft(ia,Math.max(0,n.find(this._root,'.fbScrollableAreaBody').offsetWidth-ia.offsetWidth));};ha.prototype._sendEventsSuggestionRequest=function(ia){"use strict";new s('ajax/events/tagging/suggestion_query').setData(ia).setHandler(null).send();};ha.prototype._initFileInput=function(){"use strict";};ha.prototype._getTotalNumberOfStickersOnPhotos=function(){"use strict";var ia=n.scry(this._root,".fbVaultGridItem"),ja=0;ia.forEach(function(ka){ja+=ba.getTotalNumOfStickersOnPhoto(ka.getAttribute('data-originalfbid'));});return ja;};ha.prototype._onSubmit=function(){"use strict";var ia=Date.now(),ja=this.logWithTaggingData(this.getPhotoCount(),this.getComposerID()),ka={volume:this.getPhotoCount(),with_tag_count:ja,sticker_count:this._getTotalNumberOfStickersOnPhotos()};this.logStep(z.CLIENT_PUBLISH_BEGIN,ka);var la=new ca();la.addSubscriptions(g.listen(this._root,'success',function(ma){ka.dt=Date.now()-ia;this.logStep(z.CLIENT_PUBLISH_SUCCESS,ka);this.logStep(z.CLIENT_FLOW_SUCCESS);la.release();}.bind(this)),g.listen(this._root,'error',function(ma){ka.dt=Date.now()-ia;ma=ma.getData().response;if(ma){ka.error_code=ma.getError();ka.error_info=ma.getErrorDescription();}this.logStep(z.CLIENT_PUBLISH_FAIL,ka);la.release();}.bind(this)));};ha.prototype._checkPhotoMaxSelect=function(){"use strict";if(this._config.maxSelect>1)if(this.getPhotoCount()>this._config.maxSelect){this._config.warningDialog.show();if(this._overImageSelectionLimitLock)this._overImageSelectionLimitLock.lock();}else{this._config.warningDialog.hide();if(this._overImageSelectionLimitLock)this._overImageSelectionLimitLock.unlock();}};e.exports=ha;},null);
__d("GroupSellComposerLogger",["BanzaiLogger","GroupSellComposerActionEvents"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={log:function(j,event,k){g.log('GroupSellComposerActionsLoggerConfig',{event:event,group_id:j,is_edit:k});},logComposerSubmit:function(j,k,l,m,n,o,p,q,r){g.log('GroupSellComposerActionsLoggerConfig',{event:h.COMPOSER_SUBMIT,group_id:j,title:k,price_currency:l,price_amount:m,description:n,pickup_note:o,num_photos:p,is_edit:q,is_intercept:r});},logComposerNonForsaleSubmit:function(j,k,l){g.log('GroupSellComposerActionsLoggerConfig',{event:h.COMPOSER_SUBMIT_REGULAR,group_id:j,description:k,is_edit:l});},logVideoEvent:function(event,j){g.log('GroupSellComposerActionsLoggerConfig',{event:event,video_time_position:j});}};e.exports=i;},null);
__d("ComposerXSellAttachmentMixin",["Arbiter","ComposerXController","CSS","DataStore","DOM","Focus","Input","Event","GroupSellComposerActionEvents","GroupSellComposerLogger","Parent","SubscriptionsHandler","URI","URLScraper","csx","cx","setImmediate"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){b.__markCompiled&&b.__markCompiled();var x={initSellInputs:function(y){this._isUploadingPhotos=false;this._composerSubmitted=false;var z=this.getComponent('forsale').instance;if(this._linkShare){l.set(this._getDescriptionTextarea());}else if(!this._config.isDefaultComposer)l.set(z.getTitleInput());this._inputsEverChanged={title:false,price:false,description:false,pickupNote:false,category:false,multipleItems:false,submitEnabled:false,launchedSellComposer:false};if(this._sellInputListeners){this._sellInputListeners.release();this._sellInputListeners=null;}if(this._descriptionFocusListener){this._descriptionFocusListener.remove();this._descriptionFocusListener=null;}this._sellInputListeners=new r();this._sellInputListeners.addSubscriptions(n.listen(z.getTitleInput(),'input',this._inputsChanged.bind(this)),n.listen(z.getTitleInput(),'change',this._inputsChanged.bind(this)),n.listen(z.getPriceInput(),'input',this._inputsChanged.bind(this)),n.listen(z.getPriceInput(),'change',this._inputsChanged.bind(this)),n.listen(z.getMultipleItemsCheckbox(),'change',this._inputsChanged.bind(this)),n.listen(this.getComponent('maininput').element,'input',this._inputsChanged.bind(this)),n.listen(this.getComponent('maininput').element,'change',this._inputsChanged.bind(this)),n.listen(z.getPickupNoteInput(),'input',this._inputsChanged.bind(this)),n.listen(z.getPickupNoteInput(),'change',this._inputsChanged.bind(this)),z.subscribe('categoryChanged',this._inputsChanged.bind(this)),n.listen(this.getSubmitButton(),'click',this._submitButtonClicked.bind(this)));if(this._taggingFlyoutData&&this._taggingFlyoutData.recognitionController)this._sellInputListeners.addSubscriptions(this._taggingFlyoutData.recognitionController.subscribe('done',this._inputsChanged.bind(this)));var aa=k.scry(this._root,"._9s")[0];if(aa)this._sellInputListeners.addSubscriptions(n.listen(aa,'click',this._removeLinkAttachment.bind(this)));this._urlScraper=new t(this.getComponent('maininput').element,function(){return this.getComponent('maininput').instance.getValue();}.bind(this));this._scraperListener=this._urlScraper.subscribe('match',function(da,ea){if(this._hasPhotos||aa||this._config.isEditComposer)return;var fa=new s(this._config.scraperEndpoint);fa.addQueryData({scrape_url:encodeURIComponent(ea.url)});h.getAttachment(this._root,fa.toString());}.bind(this));this.setHasPhotos(this.getPhotoCount()>0);this.getScrollableArea().setPlaceholderHandler(function(){});if(y)p.log(this._config.targetID,o.COMPOSER_LOAD,this._config.isEditComposer);this._logLaunchSellComposer();this._sellComposerInited=true;this._inputsChanged();var ba=this.getComponent('maininput'),ca=!!j.get(ba.element,'groupForSalePostInterceptSubmit');z.setInitialData(ba.instance.getValue(),ca);if(ca){j.set(ba.element,'groupForSalePostInterceptSubmit',false);this.getSubmitButton().click();}},supportsDragDrop:function(){return false;},resetSellInputs:function(){if(this._sellInputListeners){this._sellInputListeners.release();this._sellInputListeners=null;}if(this._urlScraper){this._urlScraper.disable();this._urlScraper.reset();this._urlScraper=null;}if(this._descriptionFocusListener){this._descriptionFocusListener.remove();this._descriptionFocusListener=null;}var y=q.byClass(this._root,"child_was_focused");if(y)i.removeClass(y,"child_was_focused");this._isUploadingPhotos=false;this._composerSubmitted=false;},cleanupSellInputs:function(){if(this._scraperListener){this._scraperListener.unsubscribe();this._scraperListener=null;}if(!this._descriptionFocusListener)this._descriptionFocusListener=n.listen(this._getDescriptionTextarea(),'focus',function(){this._descriptionFocusListener.remove();this._descriptionFocusListener=null;if(this._nuxTooltip)this._nuxTooltip.show();}.bind(this));},_inputsChanged:function(){if(!this._sellComposerInited)return;var y=this.getComponent('forsale').instance,z=m.isEmpty(y.getTitleInput()),aa=m.isEmpty(y.getHiddenPriceInput()),ba=y.isMultipleItems(),ca=y.requiresCategory(),da=y.hasCategory(),ea=this.getComponent('maininput').instance,fa=!ea.getValue(),ga=m.isEmpty(y.getPickupNoteInput());if(!this._inputsEverChanged.title&&!z){p.log(this._config.targetID,o.COMPOSER_FILL_TITLE,this._config.isEditComposer);this._inputsEverChanged.title=true;}if(!this._inputsEverChanged.price&&!aa){p.log(this._config.targetID,o.COMPOSER_FILL_PRICE,this._config.isEditComposer);this._inputsEverChanged.price=true;}if(!this._inputsEverChanged.description&&!fa){p.log(this._config.targetID,o.COMPOSER_FILL_DESCRIPTION,this._config.isEditComposer);this._inputsEverChanged.description=true;}if(!this._inputsEverChanged.pickupNote&&!ga){p.log(this._config.targetID,o.COMPOSER_FILL_PICKUP_NOTE,this._config.isEditComposer);this._inputsEverChanged.pickupNote=true;}if(!this._inputsEverChanged.category&&da){p.log(this._config.targetID,o.COMPOSER_FILL_CATEGORY,this._config.isEditComposer);this._inputsEverChanged.category=true;}if(this._inputsEverChanged.multipleItems!==ba){p.log(this._config.targetID,ba?o.COMPOSER_SELECT_MULTIPLE_ITEMS:o.COMPOSER_CLEAR_MULTIPLE_ITEMS,this._config.isEditComposer);this._inputsEverChanged.multipleItems=ba;}var ha=!this._isUploadingPhotos&&!this._composerSubmitted&&!z&&(!aa||ba)&&(!ca||da),ia=this.getSubmitButton().parentNode,ja=k.find(ia,"._314l");i.conditionShow(ja,!ha);if(!this._inputsEverChanged.submitEnabled&&ha){this._inputsEverChanged.submitEnabled=true;p.log(this._config.targetID,o.COMPOSER_SUBMIT_ENABLED,this._config.isEditComposer);}this._setSubmitButtonEnabled(ha);},_removeLinkAttachment:function(){if(!this._linkShare)return;k.remove(this._linkShare);this._linkShare=null;this._urlScraper.disable();},startedUploadingPhotos:function(){this._isUploadingPhotos=true;this._inputsChanged();},finishedUploadingPhotos:function(){this._isUploadingPhotos=false;this._inputsChanged();},setHasPhotos:function(y){this._hasPhotos=y;if(y)this._removeLinkAttachment();},_getDescriptionTextarea:function(){return k.find(this.getComponent('maininput').element,'textarea.input');},_submitButtonClicked:function(){this._composerSubmitted=true;this._logComposerSubmitted();w(this._inputsChanged.bind(this));},_logLaunchSellComposer:function(){var y=q.byClass(this._root,"focus_target");if(i.hasClass(y,'child_was_focused')){this._logComposerLaunched();}else{var z=this.getComponent('forsale').instance;this._titleFocusHandler=n.listen(z.getTitleInput(),'focus',this._logComposerLaunched.bind(this));}},_logComposerLaunched:function(){if(this._titleFocusHandler)this._titleFocusHandler.remove();if(this._inputsEverChanged.launchedSellComposer)return;this._inputsEverChanged.launchedSellComposer=true;p.log(this._config.targetID,o.LAUNCH_SELL_COMPOSER,this._config.isEditComposer);g.inform('GroupSellComposer/launchedComposer');},_logComposerSubmitted:function(){var y=this.getComponent('forsale').instance,z=this.getComponent('maininput'),aa=!!j.get(z.element,'groupForSalePostIntercept')&&!j.get(z.element,'groupForSalePostInterceptSubmit'),ba=parseFloat(m.getValue(y.getHiddenPriceInput()))*100;p.logComposerSubmit(this._config.targetID,m.getValue(y.getTitleInput()),m.getValue(y.getCurrencyInput()),ba,z.instance.getValue(),m.getValue(y.getPickupNoteInput()),this.getPhotoCount(),this._config.isEditComposer,aa);}};e.exports=x;},null);
__d("ComposerXSellPlusAttachment",["ComposerXMediaUploadPlusAttachment","ComposerXSellAttachmentMixin","GroupSellComposerActionEvents","GroupSellComposerLogger","Parent","classWithMixins","cx","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();var o=l(g,n(h));for(var p in o)if(o.hasOwnProperty(p))r[p]=o[p];var q=o===null?null:o.prototype;r.prototype=Object.create(q);r.prototype.constructor=r;r.__superConstructor__=o;function r(s,t,u,v,w){"use strict";o.call(this,s,t,u);this.attachmentClassName="_4_7-";this._linkShare=v;this._nuxTooltip=w;}r.prototype.initWithComponents=function(s){"use strict";q.initWithComponents.call(this);this.getTagger().hideTaggerIcons();this._root.action=this._config.statusEndpoint;this.initSellInputs(!!s);this.updateEndpoints();};r.prototype.persistUploadArea=function(){"use strict";return true;};r.prototype.reset=function(){"use strict";this.resetSellInputs();q.reset.call(this);};r.prototype.cleanup=function(){"use strict";this.cleanupSellInputs();this.getTagger().showTaggerIcons();this.resetSellInputs();q.cleanup.call(this);};r.prototype.canSwitchAway=function(){"use strict";return !k.byClass(this._root,'async_saving');};r.prototype._onUploadStart=function(){"use strict";q._onUploadStart.call(this);this.setHasPhotos(true);this.startedUploadingPhotos();};r.prototype._handleImageRemoved=function(s,t){"use strict";q._handleImageRemoved.call(this,s,t);this.updateEndpoints();j.log(this._config.targetID,i.COMPOSER_DELETE_PHOTO,this._config.isEditComposer);};r.prototype._handleImageAdded=function(s,t){"use strict";q._handleImageAdded.call(this,s,t);this.finishedUploadingPhotos();this.updateEndpoints();j.log(this._config.targetID,i.COMPOSER_ADD_PHOTO,this._config.isEditComposer);};r.prototype.updateEndpoints=function(){"use strict";if(this.getPhotoCount()>0&&!this._config.isEditComposer){this._root.action=this._config.photoEndpoint;this.setHasPhotos(true);}else{this._root.action=this._config.statusEndpoint;this.setHasPhotos(false);}};e.exports=r;},null);
__d("ComposerXImplicitLocation",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h,i,j,k){"use strict";this._citySharer=h;this._placeTagger=i;this._hiddenInput=j;this._subscriptions=[];this._subscribeChangeCity();this._subscribeSelect();this._subscribeUnselect();}g.prototype.cleanup=function(){"use strict";while(this._subscriptions.length)this._subscriptions.pop().unsubscribe();};g.prototype.disable=function(){"use strict";if(!this._placeTagger.getCore().getValue()){this._disableImplicit=true;this._citySharer.saveCityInfo();this._citySharer.clearCity();}this._placeTagger.getData().setBootstrapEndpoint('/ajax/places/typeahead');};g.prototype.enable=function(){"use strict";if(!this._placeTagger.getCore().getValue()){this._citySharer.restoreCityInfo();this._disableImplicit=false;}this._placeTagger.getData().resetBootstrapEndpoint();};g.prototype.selectPlace=function(h){"use strict";if(h.place_type=='city'){this._citySharer.changeCity(h.text,h.uid,h.city_id);this._placeTagger.getCore().setCity(h.city_id,true);}if(h.city_id){if(!this._disableImplicit){this._citySharer.changeCity(h.city_name,h.city_page_id,h.city_id);}else this._citySharer.setCityData(h.city_name,h.city_page_id,h.city_id);}else this._citySharer.clearCity();this._citySharer.addPlace(h);};g.prototype.unselectPlace=function(){"use strict";this._hiddenInput.value=this._citySharer.getValue();this._citySharer.clearPlace();if(this._disableImplicit)this.disable();};g.prototype._subscribeChangeCity=function(){"use strict";this._subscriptions.push(this._citySharer.subscribe('change',function(h,i){if(!this._placeTagger.getCore().getHiddenValue())this._hiddenInput.value=this._citySharer.getValue();if(i&&i.city_id)this._placeTagger.getCore().setCity(i.city_id,true);}.bind(this)));};g.prototype._subscribeSelect=function(){"use strict";this._subscriptions.push(this._placeTagger.subscribe('select',function(h,i){this.selectPlace(i.selected);}.bind(this)));};g.prototype._subscribeUnselect=function(){"use strict";this._subscriptions.push(this._placeTagger.subscribe('unselect',this.unselectPlace.bind(this)));};e.exports=g;},null);
__d("ComposerXCameraIconBehavior",["Arbiter","ComposerXMediaUploadHandler","CSS","Event","cx"],function(a,b,c,d,e,f,g,h,i,j,k){b.__markCompiled&&b.__markCompiled();var l={initCameraIcon:function(m){this._cameraIcon=m.getComponent('cameraicon');if(!this._config.showCameraIcon){i.hide(this._cameraIcon.element);return;}i.show(this._cameraIcon.element);var n=this._cameraIcon.instance,o=new h(this._config.composerID,{imagesOnly:this._config.imagesOnly,isEditComposer:this._config.isEditComposer,photoUploadOverrideEndpoint:this._config.photoUploadOverrideEndpoint});this._listeners.push(j.listen(this._cameraIcon.element,'click',function(){o.fetchAttachments();g.inform('cameraicon/click');}.bind(this)));this._subscriptions.push(n.subscribe('change',function(){o.handleFileSelected(n);i.addClass(this._cameraIcon.element,"_19_a");}.bind(this)));}};e.exports=l;},null);
__d("PlaceUtils",["PlaceTagType"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={placesClose:function(i,j,k,l){i=i||0;j=j||0;k=k||0;l=l||0;return (Math.abs(i-k)<1e-05)&&(Math.abs(j-l)<1e-05);},isNonSpecificPlace:function(i){return (i==g.CITY||i==g.STATE_PROVINCE||i==g.COUNTRY);}};e.exports=h;},null);
__d("ComposerXStandardTagger",["Arbiter","ArbiterMixin","AsyncRequest","CSS","ComposerXImplicitLocation","CurrentUser","DOM","Event","Focus","Input","Keys","Parent","PlaceUtils","StickyPlaceholderInput","WeakToken","copyProperties","cx","isEmpty","mixin"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){b.__markCompiled&&b.__markCompiled();var z=y(h);for(var aa in z)if(z.hasOwnProperty(aa))ca[aa]=z[aa];var ba=z===null?null:z.prototype;ca.prototype=Object.create(ba);ca.prototype.constructor=ca;ca.__superConstructor__=z;function ca(da){"use strict";this._listeners=[];this._subscriptions=[];this._onCleanup=[];this._config=da||{};this._taggers={};this._taggerIcons={};this._onTaggerShowCallbacks={};this._onTaggerHideCallbacks={};this._currentTagger=null;this._socialTextSelectors={};}ca.prototype.init=function(da){"use strict";this._mentionsInput=da.getComponent('maininput');this._withTagger=da.getComponent('withtagger');this._withTaggerIcon=da.getComponent('withtaggericon');this._placeTagger=da.getComponent('placetagger');this._hiddenExplicitPlace=da.getComponent('explicitplaceinput');this._citySharerIcon=da.getComponent('citysharericon');this._hiddenPlaceInput=da.getComponent('hiddenplaceinput');this._placeNameInput=da.getComponent('placenameinput');this._sessionID=da.getComponent('hiddensessionid');this._editParams=da.getComponent('editparams');this._interestTagger=da.getComponent('interesttagger');this._interestTaggerIcon=da.getComponent('pagestargetingicon');if(this._hasMentionsInput()){this._input=m.scry(this._mentionsInput.element,'textarea.input')[0];g.subscribe('composer/ogCustomIconSelected',function(){o.set(this._input);}.bind(this));g.subscribe('composer/lookingforTagged',function(){o.set(this._input);}.bind(this));}this._withTagger&&this.initAndRegisterWithTagger();this._placeTagger&&this.initAndRegisterPlaceTagger();this._placeTagger&&this.registerAutoEventSuggestion();this.initAndRegisterInterestTagger();if(this._hasMentionsInput())this._listeners.push(n.listen(this._mentionsInput.element,'mousedown',this._onMentionsInputClicked.bind(this)));};ca.prototype.registerAutoEventSuggestion=function(){"use strict";this._subscriptions.push(g.subscribe('Events/autoSuggestionConfirmed',function(da,ea){this._toggleTagger('place');g.inform("Events/autoSuggestionSelected",ea);o.set(this._input);}.bind(this)));};ca.prototype.initAndRegisterPlaceTagger=function(){"use strict";this.registerTagger('place',this._placeTagger,this._citySharerIcon);this.initTaggerInput('place',this._placeTagger.instance.getCore().getElement());this._initCitySharer();this._initPlaceTagger();};ca.prototype.initAndRegisterWithTagger=function(){"use strict";this.registerTagger('with',this._withTagger,this._withTaggerIcon);this.initTaggerInput('with',this._withTagger.instance.getInput());this._initWithTagger();if(this.isEditComposer())this._updateWithTaggerUI();};ca.prototype.initAndRegisterInterestTagger=function(){"use strict";if(!this._interestTagger||!this._interestTagger)return;this.registerTagger('interest',this._interestTagger,this._interestTaggerIcon);this.initTaggerInput('interest',this._interestTagger.instance.getInput());this._subscriptions.push(this._interestTagger.instance.subscribe(['addToken','removeToken','init'],this._updateInterestTaggerUI.bind(this)));};ca.prototype.cleanup=function(){"use strict";this.hideTaggers();this._listeners.forEach(function(da){da.remove();});this._listeners=[];this._subscriptions.forEach(function(da){da.unsubscribe();});this._subscriptions=[];this._onCleanup.forEach(function(da){da();});this._onCleanup=[];if(this._citySharerIcon)this._implicitLocation.cleanup();this._brComposerUpsell=null;};ca.prototype.reset=function(){"use strict";if(this._socialTextRequest)this._socialTextRequest.abort();};ca.prototype.registerTagger=function(da,ea,fa){"use strict";this._taggers[da]=ea;if(this.hasIcons()){this._taggerIcons[da]=fa;this._listeners.push(n.listen(this._taggerIcons[da].element,'click',this._toggleTagger.bind(this,da)));}};ca.prototype.hideTaggerIcons=function(){"use strict";for(var da in this._taggers)j.hide(this._taggerIcons[da].element);};ca.prototype.showTaggerIcons=function(){"use strict";for(var da in this._taggers)j.show(this._taggerIcons[da].element);};ca.prototype.initTaggerInput=function(da,ea){"use strict";var fa=this._config.placeholders||{};if(fa[da])t.setPlaceholderText(ea,fa[da]);this._onTaggerShowCallbacks[da]=o.set.bind(null,ea);this._listeners.push(n.listen(ea,'keydown',function(ga){if(n.getKeyCode(ga)==q.RETURN&&!p.getValue(ga.getTarget())){this.hideTaggers();setTimeout(o.set.bind(null,this._input),0);}}.bind(this)));};ca.prototype.setTaggerCallback=function(da,ea){"use strict";this._onTaggerShowCallbacks[da]=ea;};ca.prototype.setTaggerHideCallback=function(da,ea){"use strict";this._onTaggerHideCallbacks[da]=ea;};ca.prototype._initCitySharer=function(){"use strict";this._implicitLocation=new k(this._citySharerIcon.instance,this._placeTagger.instance,this._hiddenPlaceInput.element);if(this._config.disableImplicitCity){this._implicitLocation.disable();}else this._implicitLocation.enable();};ca.prototype.switchTaggerInResponseToClick=function(event){"use strict";var da=event.getTarget();if(r.byClass(da,'withToken')){this.switchToTagger('with');}else if(r.byClass(da,'placeToken')){this.switchToTagger('place');}else if(r.byClass(da,'og_composer_object')){this.switchToTagger('ogtagger');}else this._hideTaggersFromMentionsInputClick();};ca.prototype._onMentionsInputClicked=function(event){"use strict";this.switchTaggerInResponseToClick(event);};ca.prototype._hideTaggersFromMentionsInputClick=function(){"use strict";this.hideTaggers();};ca.prototype._initWithTagger=function(){"use strict";this._subscriptions.push(this._withTagger.instance.subscribe(['addToken','removeToken','init'],this._updateWithTaggerUI.bind(this)));this.refreshWithTaggerPlaceholder();};ca.prototype.getWithTaggerPlaceholder=function(){"use strict";return this._config.placeholders?this._config.placeholders['with']:null;};ca.prototype.getCitySharerIcon=function(){"use strict";return this._citySharerIcon;};ca.prototype.refreshWithTaggerPlaceholder=function(){"use strict";var da=this.getWithTaggerPlaceholder();if(da)this._withTagger.instance.setPlaceholder(da);};ca.prototype._initPlaceTagger=function(){"use strict";this._subscriptions.push(this._placeTagger.instance.subscribe('select',function(da,ea){this._hiddenPlaceInput.element.value=ea.selected.uid;this._placeNameInput.element.value=ea.selected.text;this._hiddenExplicitPlace.element.value=true;this._placeType=ea.selected.place_type;this.updateTaggedText();this.hideTaggers();o.set(this._input);}.bind(this)));this._subscriptions.push(this._placeTagger.instance.subscribe('unselect',function(da,ea){this._hiddenExplicitPlace.element.value=false;this._placeNameInput.element.value='';this._placeType=null;this.updateTaggedText();}.bind(this)));};ca.prototype.addSubscription=function(da){"use strict";this._subscriptions.push(da);};ca.prototype.addListener=function(da){"use strict";this._listeners.push(da);};ca.prototype.hasIcons=function(){"use strict";return true;};ca.prototype._showTagger=function(da){"use strict";g.inform('showTagger');this._currentTagger=da;j.show(this._taggers[da].element);if(this.hasIcons())j.addClass(this._taggerIcons[da].element,"_509o");if(da==='with')new i().setURI('/ajax/fof/user_education.php').setData({increment:1}).send();if(this._onTaggerShowCallbacks[da])this._onTaggerShowCallbacks[da]();};ca.prototype._hideTagger=function(da){"use strict";j.hide(this._taggers[da].element);if(this.hasIcons())j.removeClass(this._taggerIcons[da].element,"_509o");if(this._onTaggerHideCallbacks[da])this._onTaggerHideCallbacks[da]();if(this._currentTagger===da)this._currentTagger=null;};ca.prototype.hideTaggers=function(){"use strict";for(var da in this._taggers)this._hideTagger(da);this._currentTagger=null;this.inform('hidetaggers');};ca.prototype.isAnyTaggerShown=function(){"use strict";return !!this._currentTagger;};ca.prototype.switchToTagger=function(da){"use strict";this.hideTaggers();this._showTagger(da);};ca.prototype._toggleTagger=function(da){"use strict";if(j.shown(this._taggers[da].element)){this.hideTaggers();}else this.switchToTagger(da);};ca.prototype._getTaggedTextData=function(){"use strict";if(this._hasPlaceTagger())var da=this._placeTagger.instance.getCore(),ea=da.getHiddenValue(),fa=ea&&da.getValue();var ga=((this._withTagger&&this._withTagger.instance.getTokens())||[]).filter(function(ha){return ha.info.uid!=l.getID();});if(!ga.length&&!fa)return {};return {people:ga.map(function(ha){return ha.info.uid;}),weakReferences:ga.filter(function(ha,ia,ja){return (ha instanceof u);}).map(function(ha){return ha.info.uid;}),place:fa,placeID:ea,isNonSpecificPlace:s.isNonSpecificPlace(this._placeType)};};ca.prototype.updateTaggedText=function(){"use strict";if(this._hasMentionsInput()){var da=this._getTaggedTextData();if(this.getExtraTaggedTextData)da=v(da,this.getExtraTaggedTextData());++this._requestID;if(x(da)){this._mentionsInput.instance.setAuxContent(null);g.inform('reflow');return;}da.requestID=this._requestID;da.sessionID=this._sessionID.element.value;this._socialTextRequest=new i();this._socialTextRequest.setURI('/ajax/metacomposer/social_text.php').setData(da).setHandler(this._handleSocialText.bind(this)).send();}};ca.prototype._updateWithTaggerUI=function(){"use strict";if(!this._withTagger||!this._withTaggerIcon)return;setTimeout(t.update.bind(null,this._withTagger.instance.getInput()),0);j.conditionClass(this._withTaggerIcon.element,"_1dsa",this._withTagger.instance.getTokens().length>0);this.updateTaggedText();};ca.prototype._updateInterestTaggerUI=function(){"use strict";j.conditionClass(this._interestTaggerIcon.element,"_21yl",this._interestTagger.instance.getTokens().length>0);};ca.prototype._handleSocialText=function(da){"use strict";if(da.payload.requestID===this._requestID){var ea=this._mentionsInput.instance;ea.setAuxContent(da.payload.rendered);var fa=ea.getAuxContentRoot();if(fa)this._input.setAttribute('aria-labelledby',m.getID(fa));g.inform('reflow');}};ca.prototype._hasMentionsInput=function(){"use strict";return this._mentionsInput!==(void 0);};ca.prototype._hasPlaceTagger=function(){"use strict";return this._placeTagger!==(void 0);};ca.prototype.isEditComposer=function(){"use strict";return !!this._editParams;};v(ca.prototype,{_placeType:null,_requestID:0,_socialTextRequest:null});e.exports=ca;},null);
__d("ComposerXPlusTagger",["ComposerXCameraIconBehavior","ComposerXStandardTagger","classWithMixins","mixin"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();var k=i(h,j(g));for(var l in k)if(k.hasOwnProperty(l))n[l]=k[l];var m=k===null?null:k.prototype;n.prototype=Object.create(m);n.prototype.constructor=n;n.__superConstructor__=k;function n(o){"use strict";k.call(this,o);this._eventuallyTagger=null;}n.prototype.init=function(o){"use strict";m.init.call(this,o);if(o.getComponent('cameraicon'))this.initCameraIcon(o);};n.prototype._nonObstrusiveSwitchToTagger=function(o){"use strict";var p=this._onTaggerShowCallbacks[o];delete this._onTaggerShowCallbacks[o];this.switchToTagger(o);this._dontHideTaggerOnMentionsFocus=o;this._onTaggerShowCallbacks[o]=p;};n.prototype.eventuallySwitchToTagger=function(o){"use strict";if(!this.isAnyTaggerShown()){this._nonObstrusiveSwitchToTagger(o);}else if(this._currentTagger!==o)this._eventuallyTagger=o;};n.prototype.switchToTagger=function(o){"use strict";if(this._eventuallyTagger===o)this._eventuallyTagger=null;this._nonEventuallyHideTaggers();this._showTagger(o);};n.prototype.hideTaggers=function(){"use strict";m.hideTaggers.call(this);if(this._eventuallyTagger){this._nonObstrusiveSwitchToTagger(this._eventuallyTagger);this._eventuallyTagger=null;}};n.prototype._nonEventuallyHideTaggers=function(){"use strict";m.hideTaggers.call(this);};n.prototype._hideTaggersFromMentionsInputClick=function(){"use strict";if(this._currentTagger!=this._dontHideTaggerOnMentionsFocus){this.eventuallySwitchToTagger(this._dontHideTaggerOnMentionsFocus);m._hideTaggersFromMentionsInputClick.call(this);}};e.exports=n;},null);
__d("BanzaiNectarSimple",["Banzai"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(j){return {log:function(k,l,m){var n={e:l,a:m};g.post('nectar_simple:'+k,n,j);}};}var i=h();i.create=h;e.exports=i;},null);
__d("RTLKeys",["Keys","Locale","copyProperties"],function(a,b,c,d,e,f,g,h,i){b.__markCompiled&&b.__markCompiled();var j=i({},g);if(h.isRTL()){j.LEFT=g.RIGHT;j.RIGHT=g.LEFT;}e.exports=j;},null);
__d("OGComposerTagger",["Arbiter","ArbiterMixin","BanzaiNectarSimple","CSS","DOM","Event","Input","RTLKeys","StickyPlaceholderInput","areEqual","csx","mixin","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){b.__markCompiled&&b.__markCompiled();var t=r(h);for(var u in t)if(t.hasOwnProperty(u))w[u]=t[u];var v=t===null?null:t.prototype;w.prototype=Object.create(v);w.prototype.constructor=w;w.__superConstructor__=t;function w(x,y,z,aa,ba,ca,da,ea,fa,ga,ha){"use strict";this._verbTypeahead=x;this._nounTypeahead=y;this._hiddenObjectStr=z;this._suggestionMechanismInput=aa;this._suggestionLoggingDataInput=ea;this._nounTypeaheadDatasources=fa;this._defaultNounTypeaheadDatasource=this._nounTypeahead.getData();this._customIconInput=ba;this._objectQuery=null;this._suggestIconElement=null;this._suggestIconShown=false;this._nounTypeaheadMetrics=da;this._iconPickerOpened=false;this._placeSpecificVerbList=ga;this._enableVerbPrefetching=ha;this._initialObjectStr=this.getObjectStr();this._initialObjectID=this.getObjectID();if(ca){k.setContent(this._getVerbSpan(),ca);j.show(this._getVerbSpan());}this._prefetchVerbs();x.getCore().preventFocusChangeOnTab=true;y.getCore().preventFocusChangeOnTab=true;y.getCore().keepFocused=false;this._watchCloseButton(y);var ia=y.getCore().getElement(),ja=x.getCore().getElement();s([x.subscribe('select',function(ka,la){return this._handleVerbChange(la.selected);}.bind(this)),y.subscribe('select',function(ka,la){return this._handleNounChange(la.selected);}.bind(this)),y.subscribe('unselect',function(ka,la){z.value='';this.inform('changed');this.inform('unselect');}.bind(this)),l.listen(ja,'keydown',function(event){if(l.getKeyCode(event)==n.SPACE||l.getKeyCode(event)==n.RIGHT){x.getView().select(false);event.kill();}if(l.getKeyCode(event)!=n.BACKSPACE&&l.getKeyCode(event)!=n.DELETE&&l.getKeyCode(event)!=n.SPACE&&x.getData().value!=="")i.log('og_composer_waterfall','verb_typeahead',{search_string:x.getData().value});}),l.listen(ia,'keydown',function(event){if((l.getKeyCode(event)==n.BACKSPACE||l.getKeyCode(event)==n.LEFT)&&m.isEmpty(this._getNounInput()))this._showVerbTypeahead();}.bind(this)),g.subscribe('structuredSuggestion/add',function(ka,la){this._handleVerbChange(la);}.bind(this)),g.subscribe('ogComposer/asyncSuggest',function(ka,la){var ma=JSON.parse(la);if(!this.isSet()){this.setVerbandNoun(ma.verb,ma.noun);g.inform('ogComposer/asyncSuggest/display',la);var na=false;this.subscribe('changed',function(event){if(!na){na=true;g.inform('ogComposer/asyncSuggest/xout',la);}});}}.bind(this)),g.subscribe('highConfSuggestion/saved',function(){this._verbTypeahead.getData().dirty();this._verbTypeahead.getData().bootstrap();}.bind(this))]);}w.prototype._prefetchVerbs=function(x){"use strict";if(this._enableVerbPrefetching){var y=this._verbTypeahead.getData();y.bootstrapData.is_prefetching=true;y.bootstrap();y.bootstrapData.is_prefetching=false;}};w.prototype._prefetchNouns=function(x,y){"use strict";for(var z in this._nounTypeaheadDatasources)if(this._nounTypeaheadDatasources.hasOwnProperty(z)){var aa=this._nounTypeaheadDatasources[z];aa.init();aa.dirty();if(x!=null){aa.bootstrapData[x]=y;aa.queryData[x]=y;}aa.queryData.at_id=z;aa.bootstrapData.at_id=z;aa.bootstrapData.is_prefetching=true;aa.bootstrap();aa.bootstrapData.is_prefetching=false;}};w.prototype._updateNounTypeahead=function(x,y){"use strict";var z=this._defaultNounTypeaheadDatasource;if(p(y,z.bootstrapData[x]))return;this._prefetchNouns(x,y);z.bootstrapData[x]=y;z.queryData[x]=y;if(z.bootstrapData.at_id){this._nounTypeaheadMetrics.init(this._nounTypeahead);z.dirty();z.bootstrap();}};w.prototype.showTagger=function(){"use strict";g.inform('showOGTagger');this._nounTypeahead.getCore().setEnabled(true);if(this.isSet()&&!this._suggestionMechanismInput.value){this._showNounTypeahead();}else if(this.isSet()){this._verbTypeahead.getCore().reset();this._nounTypeahead.getCore().reset();this.inform('changed');this._showVerbTypeahead();}else this._showVerbTypeahead();if(this._suggestIconElement){j.hide(this._suggestIconElement);this._suggestIconShown=false;this._badgeClicked=true;}this._prefetchNouns();};w.prototype.hideTagger=function(){"use strict";this._nounTypeahead.getCore().setEnabled(false);};w.prototype.isSet=function(){"use strict";return !!(this.getObjectID()||this.getObjectStr());};w.prototype.hasChanges=function(){"use strict";return this.getObjectID()!==this._initialObjectID||this.getObjectStr()!==this._initialObjectStr;};w.prototype.reset=function(){"use strict";this._nounTypeahead.getCore().reset();this._verbTypeahead.getCore().reset();this._hiddenObjectStr.value='';this._objectQuery=null;this.setPlaceID(0);this.setCustomIconID('');this._iconPickerOpened=false;};w.prototype.setVerbandNoun=function(x,y){"use strict";this._verbTypeahead.getCore().select(x);this._handleVerbChange(x);this._nounTypeahead.getCore().select(y);this._handleNounChange(y);};w.prototype.getActionTypeID=function(){"use strict";return this._verbTypeahead.getCore().getHiddenValue();};w.prototype.getObjectID=function(){"use strict";return this._nounTypeahead.getCore().getHiddenValue();};w.prototype.setViewerCoords=function(x){"use strict";var y=JSON.stringify(x);this._updateNounTypeahead('coords',y);};w.prototype.setPlaceID=function(x){"use strict";this._updateNounTypeahead('place_id',x);var y=this._verbTypeahead.getData();if(this._placeSpecificVerbList&&x!=y.bootstrapData.place_id){y.bootstrapData.place_id=x;if(y.queryData!==(void 0))y.queryData.place_id=x;y.dirty();this._prefetchVerbs();}};w.prototype.getObjectStr=function(){"use strict";return this._hiddenObjectStr.value;};w.prototype.getObjectQuery=function(){"use strict";return this._objectQuery;};w.prototype.getVerbTypeahead=function(){"use strict";return this._verbTypeahead;};w.prototype.getNounTypeahead=function(){"use strict";return this._nounTypeahead;};w.prototype._handleVerbChange=function(x){"use strict";this._suggestionMechanismInput.value=x.suggestion_mechanism;if(x.suggestion_config){this._suggestion_logging_data=x.suggestion_config;this._suggestionLoggingDataInput.value=JSON.stringify(this._suggestion_logging_data);}else if(this._suggestion_logging_data){this._suggestion_logging_data.erased=true;this._suggestionLoggingDataInput.value=JSON.stringify(this._suggestion_logging_data);}if(x.type==='page'){this._nounTypeahead.getCore().setHiddenValue(x.uid);this._verbTypeahead.getCore().setHiddenValue(x.at_id);this.inform('changed');return;}var y=null;if(this._nounTypeaheadDatasources.hasOwnProperty(x.uid)){y=this._nounTypeaheadDatasources[x.uid];}else{y=this._defaultNounTypeaheadDatasource;y.dirty();y.queryData.at_id=x.uid;y.bootstrapData.at_id=x.uid;}if(y!==this._nounTypeahead.getData())this._nounTypeahead.swapData(y);this._nounTypeaheadMetrics.resetWithData(this._nounTypeahead);y.bootstrap(true);this._nounTypeahead.getView().setContext(x);o.setPlaceholderText(this._nounTypeahead.getCore().getElement(),x.prompt);if(x.prompt_text){j.show(this._getVerbSpan());k.setContent(this._getVerbSpan(),x.prompt_text);}else j.hide(this._getVerbSpan());this._showNounTypeahead();};w.prototype._handleNounChange=function(x){"use strict";this._suggestionMechanismInput.value='';if(x.uid){this._hiddenObjectStr.value='';}else{this._nounTypeahead.getCore().setHiddenValue('');this._hiddenObjectStr.value=x.text.trim();}this._objectQuery=x.query;this.inform('changed');};w.prototype._getVerbSpan=function(){"use strict";if(!this._verbSpan){this._verbSpan=k.create('span',{className:'verbText'});k.prependContent(this._nounTypeahead.getElement(),this._verbSpan);s(l.listen(this._verbSpan,'click',function(){this._showVerbTypeahead();return false;}.bind(this)));}return this._verbSpan;};w.prototype._getNounInput=function(){"use strict";return this._nounTypeahead.getCore().getElement();};w.prototype._showVerbTypeahead=function(){"use strict";j.show(this._verbTypeahead.getElement());j.hide(this._nounTypeahead.getElement());this._verbTypeahead.getCore().reset();this._nounTypeahead.getCore().reset();this._verbTypeahead.getCore().getElement().focus();var x=this._verbTypeahead.getData();if(this._enableVerbPrefetching&&this._placeSpecificVerbList){x.bootstrap(true);}else x.bootstrap();};w.prototype._showNounTypeahead=function(){"use strict";j.hide(this._verbTypeahead.getElement());j.show(this._nounTypeahead.getElement());this._nounTypeahead.getCore().getElement().focus();};w.prototype._watchCloseButton=function(x){"use strict";var y=k.scry(x.getElement(),'.uiCloseButton')[0];if(!y)y=k.scry(x.getElement(),"._50zy")[0];s(l.listen(y,'click',function(){this._showVerbTypeahead();return false;}.bind(this)));};w.prototype.suggestIconShown=function(){"use strict";return this._suggestIconShown;};w.prototype.showSuggestCount=function(x){"use strict";if(this._badgeClicked)return;this._suggestIconShown=true;this._suggestIconElement=x;j.show(x);};w.prototype.setCustomIconID=function(x){"use strict";this._customIconInput.value=x;};w.prototype.getCustomIconID=function(){"use strict";return this._customIconInput.value;};w.prototype.markIconPickerOpened=function(){"use strict";this._iconPickerOpened=true;};w.prototype.getIconPickerOpened=function(){"use strict";return this._iconPickerOpened;};e.exports=w;e.exports.asyncSuggest=function(x,y,z){var aa=JSON.stringify(x);g.subscribe('ogComposer/asyncSuggest/display',function(ba,ca){if(aa==ca)y();});g.subscribe('ogComposer/asyncSuggest/xout',function(ba,ca){if(aa==ca)z();});g.inform('ogComposer/asyncSuggest',aa);};},null);
__d("OGComposerTaggerNounTypeaheadView",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";}e.exports=g;},null);
__d("ComposerXOGTaggerBehavior",["Arbiter","ComposerXController","CSS","DOM","DOMQuery","OGComposerJSConstants","URI","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p=null,q=l.ActionTypeIDs.COMPOSER_ATTENDS,r={initOGTagger:function(s){this._attachmentRoot=s.getRoot();this._showPreview=s.allowOGTagPreview();this._ogTagger=s.getComponent('ogtagger');this._ogIcon=s.getComponent('ogtaggericon');this._removeUrl=s._config&&s._config.remove_url||'/ajax/composerx/attachment/status/';p=this._ogTagger.instance;this.registerTagger('ogtagger',this._ogTagger,this._ogIcon);this.setTaggerCallback('ogtagger',this._ogTagger.instance.showTagger.bind(this._ogTagger.instance));this.setTaggerHideCallback('ogtagger',this._ogTagger.instance.hideTagger.bind(this._ogTagger.instance));this.addSubscription(this._ogTagger.instance.subscribe('changed',this._handleOGActionChanged.bind(this)));this.addSubscription(this._ogTagger.instance.subscribe('unselect',this._handleOGActionRemoved.bind(this)));this._placeTagger&&this.addSubscription(this._placeTagger.instance.subscribe(['select','unselect'],this._handlePlaceChanged.bind(this)));this.addSubscription(g.subscribe('composer/initializedAttachment',function(){if(this._ogTagger.instance.isSet())g.inform('composer/deactivateDragdrop');}.bind(this)));this.addSubscription(g.subscribe('composer/ogCustomIconSelected',function(v,w){if(typeof(w)!=='object'){this._ogTagger.instance.setCustomIconID(w);return;}this._ogTagger.instance.setCustomIconID(w.icon_id);}.bind(this)));this.addSubscription(g.subscribe('composer/ogIconPickerOpened',function(v,w){if(typeof(w)!=='object'){this._ogTagger.instance.markIconPickerOpened();return;}this._ogTagger.instance.markIconPickerOpened();}.bind(this)));this.addSubscription(g.subscribe('composer/updateViewerLocationEstimate',function(v,w){return this._handleViewerLocationChanged(w);}.bind(this)));this.subscribe('hidetaggers',this.hideTypeaheadView.bind(this));this._updateOGIconState();this._updateWithTaggerUI();if(!this._config.preventUnfinishedPostAlert){var t=s.getComposerID(),u=s.getRoot();while(u!=null){u=u.parentNode;if(u.id==t)break;}h.registerConditionForComposerCancel(u,function(){return p&&p.hasChanges&&p.hasChanges();});}},_handleOGActionChanged:function(){this._ogTagger.instance.setCustomIconID('');this.updateTaggedText();this._updateOGIconState();if(this._showPreview&&this._ogTagger.instance.isSet()){g.inform('composer/deactivateDragdrop');var s=this._ogTagger.instance.getObjectID();if(s){var t=this._ogTagger.instance.getActionTypeID();if(t!=l.ActionTypeIDs.COMPOSER_LOOKS_FOR&&t!=l.ActionTypeIDs.COMPOSER_FEELS){var u=j.find(this._attachmentRoot,'input[name="hide_object_attachment"]');u.value=0;if(this._config.objectPreviewID==s)this._showAttachmentPreview();if(this._config.hasShareScrape)return;var v;if(this.isEditComposer()){v=new m(l.EditAttachmentURI);}else v=new m(this._removeUrl);v.addQueryData({override_preview_object_id:true,preview_object_id:s,preview_action_type_id:t,og_action_changed:true});h.getAttachment(this._attachmentRoot,v.toString());}else g.inform('composer/lookingforTagged');if(t==q)g.inform('composer/attendingMinutiaeAdded',{info:{original_id:s}});}}else{g.inform('composer/reactivateDragdrop');this._hideAttachmentPreview();}},_handleOGActionRemoved:function(){g.inform('composer/attendingMinutiaeRemoved',{info:{}});},_updateOGIconState:function(){i.conditionClass(this._ogIcon.element,"_4-jh",this._ogTagger.instance.isSet());if(this._ogTagger.instance.isSet()){this._ogIcon.element.setAttribute('aria-selected','true');this._ogIcon.element.removeAttribute('role');this._hideTagger('ogtagger');}else{this._ogIcon.element.setAttribute('aria-selected','false');this._ogIcon.element.setAttribute('role','button');}},_handleViewerLocationChanged:function(s){if(!s.latitude||!s.longitude)return;this._ogTagger.instance.setViewerCoords(s);},_handlePlaceChanged:function(s,t){var u=t.selected?t.selected.uid:0;this._ogTagger.instance.setPlaceID(u);},_showAttachmentPreview:function(){var s=j.scry(this._attachmentRoot,"div.fbComposerOGAttachmentPreview");if(s[0])i.show(s[0]);},_hideAttachmentPreview:function(){var s=j.scry(this._attachmentRoot,"div.fbComposerOGAttachmentPreview");if(s[0])i.hide(s[0]);},cleanupOGTagger:function(){this._showAttachmentPreview();p=null;},getExtraTaggedTextData:function(){if(!this._ogTagger||!this._ogTagger.instance.isSet())return null;var s={actionID:this._ogTagger.instance.getActionTypeID(),objectID:this._ogTagger.instance.getObjectID(),objectStr:this._ogTagger.instance.getObjectStr(),objectQuery:this._ogTagger.instance.getObjectQuery(),actionIconID:this._ogTagger.instance.getCustomIconID(),iconPickerOpened:this._ogTagger.instance.getIconPickerOpened()};return s;},isOGTaggerSet:function(){return this._ogTagger&&this._ogTagger.instance.isSet();},hideTypeaheadView:function(){this._ogTagger.instance.getNounTypeahead().getView().hide();},updateSuggestion:function(s,t){if(!s)return;var u=k.find(this._ogIcon.element,"._5xlw");if(!u)return;var v=parseInt(u.innerText,10)||0;j.setContent(u,s+v);if(!this._ogTagger.instance.suggestIconShown())this._ogTagger.instance.showSuggestCount(u);if(!t)t='';this._ogTagger.instance.getVerbTypeahead().getData().bootstrapData.user_input=t;},saveSuggestion:function(s,t){var u=this._ogTagger.instance.getVerbTypeahead().getData().bootstrapData.saved_suggestions||{};u[t]=s;this._ogTagger.instance.getVerbTypeahead().getData().bootstrapData.saved_suggestions=u;}};e.exports=r;},null);
__d("ComposerXOGTaggerReset",["CSS"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){i.instance.reset();g.hide(i.element);}e.exports=h;},null);
__d("ComposerXPeopleTaggerReset",["CSS"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){i.instance.reset();g.hide(i.element);}e.exports=h;},null);
__d("ComposerXPlaceTaggerReset",["CSS"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();function h(i){i.instance.getCore().reset();g.hide(i.element);}e.exports=h;},null);
__d("VaultComposerController",["Arbiter","CSS","SubscriptionsHandler","areEqual","copyProperties","emptyFunction","removeFromArray","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(p,q){this._uploadedImageCount=0;this._uploadingImageCount=0;this._subscriptionsHandler=new i();this._hasVideo=false;this._singleSelect=false;this._multiselectElems=q;this._initialPhotoFbids=[];this._photoFbids=[];this.setAllMediaRemovedHandler(l);this._subscriptionsHandler.addSubscriptions(g.subscribe('multi-upload/images-added/'+p,function(r,s){var t=Object.keys(s.fbids),u=t.length;this._uploadingImageCount=Math.max(0,this._uploadingImageCount-u);this._uploadedImageCount+=u;if(this._uploadingImageCount>0)return;t.forEach(function(v){var w=s.fbids[v];this._photoFbids.push(w);if(s.initialPhoto)this._initialPhotoFbids.push(w);}.bind(this));this._onImagesChanged();}.bind(this)),g.subscribe('multi-upload/image-removed/'+p,function(r,s){this._uploadedImageCount=Math.max(0,this._uploadedImageCount-1);m(this._photoFbids,s);this._onImagesChanged();}.bind(this)),g.subscribe('multi-upload/images-upload-completed/'+p,function(r,s){this._uploadingImageCount=0;this._onImagesChanged();}.bind(this)),g.subscribe('multi-upload/video-added/'+p,function(){this._multiselectElems.forEach(h.hide);this._enableComposerHandler(true);this._placeholderHandler(n._("Diga algo sobre este v\u00eddeo..."),n._("Onde este v\u00eddeo foi gravado?"));this._hasVideo=true;}.bind(this)),g.subscribe('multi-upload/video-removed/'+p,function(){this._multiselectElems.forEach(h.show);this._enableComposerHandler(false);this._placeholderHandler(n._("Diga algo sobre isto..."),n._("Onde esta foto foi tirada?"));this._hasVideo=false;this._allMediaRemovedHandler();}.bind(this)),g.subscribe('multi-upload/images-upload-start/'+p,function(r,s){this._uploadingImageCount+=s.imageCount;this._enableComposerHandler(false);var t=this.getTotalImageCount();this._placeholderHandler(o.getPlaceholderText(t),o.getPlacePickerPlaceholderText(t));this._checkForSingleSelect();}.bind(this)),g.subscribe('multi-upload/all-images-removed/'+p,function(){this._multiselectElems.forEach(h.show);this._uploadedImageCount=0;this._uploadingImageCount=0;this._enableComposerHandler(false);this._placeholderHandler(n._("Diga algo sobre isto..."),n._("Onde esta foto foi tirada?"));this._photoFbids.length=0;this._allMediaRemovedHandler();}.bind(this)));}k(o,{getPlaceholderText:function(p){if(p===0){return n._("Diga algo sobre isto...");}else if(p==1){return n._("Diga algo sobre esta foto...");}else return n._("Diga algo sobre essas fotos...");},getPlacePickerPlaceholderText:function(p){if(p===0){return n._("Onde esta foto foi tirada?");}else if(p==1){return n._("Onde esta foto foi tirada?");}else return n._("Onde essas fotos foram tiradas?");}});k(o.prototype,{setEnableComposerHandler:function(p){this._enableComposerHandler=p;return this;},setMultiselectElems:function(p){this._multiselectElems=p;return this;},setPlaceholderHandler:function(p){this._placeholderHandler=p;return this;},setAllMediaRemovedHandler:function(p){this._allMediaRemovedHandler=p;return this;},setSingleSelect:function(p){this._singleSelect=p;return this;},cleanup:function(){this._uploadedImageCount=0;this._uploadingImageCount=0;this._initialPhotoFbids.length=0;this._photoFbids.length=0;this._subscriptionsHandler.release();},_checkForSingleSelect:function(){if(this._singleSelect)this._multiselectElems.forEach(function(p){h.conditionShow(p,this.getTotalImageCount()===0);}.bind(this));},getTotalImageCount:function(){return this._uploadingImageCount+this._uploadedImageCount;},getUploadedImageCount:function(){return this._uploadedImageCount;},enableComposerHandlerIfHasImages:function(){this._enableComposerHandler(this._uploadedImageCount>0&&this._uploadingImageCount===0);},_onImagesChanged:function(){this.enableComposerHandlerIfHasImages();this._placeholderHandler(o.getPlaceholderText(this._uploadedImageCount),o.getPlacePickerPlaceholderText(this._uploadedImageCount));this._checkForSingleSelect();if(this._uploadedImageCount===0&&this._uploadingImageCount===0)this._allMediaRemovedHandler();},getPhotoFbids:function(){return this._photoFbids;},hasChanges:function(){var p=!j(this._photoFbids,this._initialPhotoFbids);return p||this._hasVideo;}});e.exports=o;},null);
__d("ComposerXUploadArea",["Arbiter","ComposerXController","CSS","DOM","PhotosMultiUploadInput","VaultComposerController","csx","cx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();function o(p,q,r){"use strict";this.$ComposerXUploadArea0=p;this.$ComposerXUploadArea1=q;this.$ComposerXUploadArea2=r;this.$ComposerXUploadArea3=0;}o.prototype.initialize=function(p,q,r,s,t){"use strict";this.$ComposerXUploadArea4=s;if(!this.$ComposerXUploadArea5)this.$ComposerXUploadArea5=new l(this.$ComposerXUploadArea4,p);this.$ComposerXUploadArea5.setSingleSelect(q.maxSelect===1).setPlaceholderHandler(this.setPlaceholderHandler.bind(this)).setMultiselectElems(p);h.registerConditionForComposerCancel(t,this.$ComposerXUploadArea5.hasChanges.bind(this.$ComposerXUploadArea5));this.$ComposerXUploadArea5.setMultiselectElems(p);};o.prototype.setEnableComposerHandler=function(p){"use strict";this.$ComposerXUploadArea5.setEnableComposerHandler(p);this.$ComposerXUploadArea5.enableComposerHandlerIfHasImages();return this;};o.prototype.setAllMediaRemovedHandler=function(p){"use strict";this.$ComposerXUploadArea5.setAllMediaRemovedHandler(p);return this;};o.prototype.setSingleSelect=function(p){"use strict";this.$ComposerXUploadArea5.setSingleSelect(p);return this;};o.prototype.setPlaceholderHandler=function(p){"use strict";this.$ComposerXUploadArea5.setPlaceholderHandler(p);return this;};o.prototype.getUploadArea=function(){"use strict";return this.$ComposerXUploadArea1;};o.prototype.getUploadItem=function(){"use strict";return this.$ComposerXUploadArea2;};o.prototype.getPhotoFbids=function(){"use strict";return this.$ComposerXUploadArea5?this.$ComposerXUploadArea5.getPhotoFbids():null;};o.prototype.handleImageAdded=function(p,q){"use strict";this.$ComposerXUploadArea6(this.getPhotoCount()+Object.keys(q.fbids).length);};o.prototype.handleImageRemoved=function(p,q){"use strict";this.$ComposerXUploadArea6(this.getPhotoCount()-1);};o.prototype.getTotalImageCount=function(){"use strict";return this.$ComposerXUploadArea5?this.$ComposerXUploadArea5.getTotalImageCount():0;};o.prototype.reset=function(){"use strict";g.inform('multi-upload/video-removed/'+this.$ComposerXUploadArea4);this.removeAllImages();};o.prototype.cleanup=function(){"use strict";this.reset();if(this.$ComposerXUploadArea5){this.$ComposerXUploadArea5.cleanup();this.$ComposerXUploadArea5=null;}};o.prototype.$ComposerXUploadArea6=function(p){"use strict";this.$ComposerXUploadArea3=p;};o.prototype.getPhotoCount=function(){"use strict";return this.$ComposerXUploadArea3;};o.prototype.getController=function(){"use strict";return this.$ComposerXUploadArea5;};o.prototype.removeAllImages=function(){"use strict";this.$ComposerXUploadArea6(0);j.scry(this.$ComposerXUploadArea0,"._yr").forEach(function(q){if(!i.hasClass(q,"_2oh"))j.remove(q);});j.scry(this.$ComposerXUploadArea0,"._579").forEach(function(q){if(!i.hasClass(q,"_2oh"))j.remove(q);});var p=this.$ComposerXUploadArea2.getUploadInput().getGrid();if(p){p.clearSession();}else k.clearSession(this.$ComposerXUploadArea4);g.inform(['multi-upload/all-images-removed/'+this.$ComposerXUploadArea4,'multi-upload/all-images-removed']);};e.exports=o;},null);
__d("GroupSellInterceptUtil",["escapeRegex"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();var h={parseInterceptedPrices:function(i,j){var k=new RegExp('\\d+','ig'),l=new RegExp(g(j)+'\\s*\\d+','ig'),m=new RegExp('\\d+(?=\\s*'+g(j)+')','ig'),n=[],o=i.match(l);if(o)o.forEach(function(p){return n=n.concat(p.match(k));});o=i.match(m);if(o)n=n.concat(o);return n;}};e.exports=h;},null);
__d("ComposerXForSaleComponent",["Currency","AdsCurrencyFormatter","ArbiterMixin","ContextualLayer","CSS","DataStore","DOM","Event","GroupSellInterceptUtil","Input","Parent","LayerHideOnBlur","SubscriptionsHandler","cx","fbt","getActiveElement","getElementText","invariant","mixin","setTextContent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){b.__markCompiled&&b.__markCompiled();var aa=y(i);for(var ba in aa)if(aa.hasOwnProperty(ba))da[ba]=aa[ba];var ca=aa===null?null:aa.prototype;da.prototype=Object.create(ca);da.prototype.constructor=da;da.__superConstructor__=aa;function da(ea,fa,ga){"use strict";this._inputs=ea;this._charCounts=fa;this._options=ga;this._currency=ga.currencies[0];x(this._currency);this._currencySymbol=g.getSymbol(this._currency);x(this._currencySymbol);var ha=this._inputs.title,ia=this._inputs.price,ja=this._inputs.pickupNote;this._subscriptions=new s();this._subscriptions.addSubscriptions(n.listen(ha,'input',this._titleChanged.bind(this)),n.listen(ha,'change',this._titleChanged.bind(this)),n.listen(ha,'focus',this._titleFocusChanged.bind(this)),n.listen(ha,'blur',this._titleFocusChanged.bind(this)),n.listen(ia,'focus',this._priceFocused.bind(this)),n.listen(ia,'input',this._priceChanged.bind(this)),n.listen(ia,'change',this._priceChanged.bind(this)),n.listen(ia,'blur',this._priceBlurred.bind(this)),n.listen(this._inputs.multipleItems,'change',this._multipleItemsChanged.bind(this)),n.listen(ja,'input',this._pickupNoteChanged.bind(this)),n.listen(ja,'change',this._pickupNoteChanged.bind(this)),n.listen(ja,'focus',this._pickupNoteFocusChanged.bind(this)),n.listen(ja,'blur',this._pickupNoteFocusChanged.bind(this)));p.setValue(this._inputs.hiddenCurrency,this._currency);this._priceChanged();this._priceBlurred();this._titleChanged();this._titleFocusChanged();this._pickupNoteChanged();this._pickupNoteFocusChanged();if(this._inputs.selectCategory){k.removeClass(this._inputs.categoriesDropdown,"hidden_elem");this._subscriptions=new s();this._subscriptions.addSubscriptions(n.listen(this._inputs.selectCategory,'click',this._handleSelectCategory.bind(this)),n.listen(this._inputs.categoriesDropdown,'click',this._handleCategoryClick.bind(this)));this._layer=new j({context:this._inputs.selectCategory,position:'below',alignment:'left'},this._inputs.categoriesDropdown);this._layer.enableBehavior(r);}}da.prototype._titleChanged=function(){"use strict";var ea=p.getValue(this._inputs.title).trim(),fa=this._options.inputMaxChars-ea.length;z(this._charCounts.title,fa);};da.prototype._titleFocusChanged=function(){"use strict";k.conditionShow(this._charCounts.title,v()===this._inputs.title);};da.prototype._priceFocused=function(){"use strict";if(p.isEmpty(this._inputs.price)&&!this.isMultipleItems())p.setValue(this._inputs.price,this._currencySymbol);};da.prototype.setInitialData=function(ea,fa){"use strict";this.setInitialPriceIfEmpty(ea,fa);if(fa){var ga=ea.length,ha=ea.substr(0,Math.min(30,ga));if(ha.length<ga)ha=ha.concat('...');var ia=this._options.everyThingElseCategoryID.toString();p.setValue(this._inputs.title,ha);if(this.requiresCategory())this._setCategory(ia,w(this._options.everythingElseCategory));}};da.prototype.setInitialPriceIfEmpty=function(ea,fa){"use strict";var ga=this._getPriceValue();if(!ga){var ha=o.parseInterceptedPrices(ea,this._currencySymbol);if(ha.length){p.setValue(this._inputs.price,ha[0]);this._priceChanged();}else if(fa)this._inputs.price.focus();}};da.prototype._priceChanged=function(){"use strict";var ea=this._getPriceValue();if(ea==null){p.setValue(this._inputs.hiddenPrice,'');p.setValue(this._inputs.price,this._currencySymbol);return;}p.setValue(this._inputs.hiddenPrice,''+ea);var fa=g.getOffset(this._currency),ga=h.formatCurrencyWithOptionalDecimals(this._currency,ea*fa);if(ga!==p.getValue(this._inputs.price))p.setValue(this._inputs.price,ga);};da.prototype._priceBlurred=function(){"use strict";var ea=this._getPriceValue();if(ea==null)p.reset(this._inputs.price);};da.prototype._getPriceValue=function(){"use strict";var ea=p.getValue(this._inputs.price),fa=ea.replace(/\D/g,'');if(!fa.length){return null;}else return parseInt(fa,10);};da.prototype._multipleItemsChanged=function(){"use strict";var ea=this.isMultipleItems();this._inputs.price.disabled=ea;k.conditionClass(q.byClass(this._inputs.price,"_29m4"),"_2t7t",ea);};da.prototype._pickupNoteChanged=function(){"use strict";var ea=p.getValue(this._inputs.pickupNote).trim();z(this._charCounts.pickupNote,this._options.inputMaxChars-ea.length);};da.prototype._pickupNoteFocusChanged=function(){"use strict";k.conditionShow(this._charCounts.pickupNote,v()===this._inputs.pickupNote);};da.prototype.requiresCategory=function(){"use strict";return !!this._inputs.selectCategory;};da.prototype.hasCategory=function(){"use strict";return (!!this._inputs.categoryIDInput&&!!p.getValue(this._inputs.categoryIDInput));};da.prototype._handleSelectCategory=function(){"use strict";this._layer.show();};da.prototype._handleCategoryClick=function(event){"use strict";var ea=l.get(event.target,'categoryID');if(ea){this._setCategory(ea,w(event.target));this._layer.hide();}};da.prototype._setCategory=function(ea,fa){"use strict";p.setValue(this._inputs.categoryIDInput,ea);z(this._inputs.selectCategory,fa);k.addClass(this._inputs.selectCategory,"_4oxb");this.inform('categoryChanged');};da.prototype.reset=function(){"use strict";p.reset(this._inputs.title);p.reset(this._inputs.price);p.reset(this._inputs.hiddenPrice);p.reset(this._inputs.pickupNote);this._charCounts.title.innerText=this._options.inputMaxChars;this._charCounts.pickupNote.innerText=this._options.inputMaxChars;this.getMultipleItemsCheckbox().checked=false;this._multipleItemsChanged();if(this._inputs.categoryIDInput){p.reset(this._inputs.categoryIDInput);z(this._inputs.selectCategory,u._("Selecione uma categoria"));k.removeClass(this._inputs.selectCategory,"_4oxb");}};da.prototype.getTitleInput=function(){"use strict";return this._inputs.title;};da.prototype.getPriceInput=function(){"use strict";return this._inputs.price;};da.prototype.getCurrencyInput=function(){"use strict";return this._inputs.hiddenCurrency;};da.prototype.getHiddenPriceInput=function(){"use strict";return this._inputs.hiddenPrice;};da.prototype.getMultipleItemsCheckbox=function(){"use strict";return m.find(this._inputs.multipleItems,'input');};da.prototype.isMultipleItems=function(){"use strict";return !!this.getMultipleItemsCheckbox().checked;};da.prototype.getPickupNoteInput=function(){"use strict";return this._inputs.pickupNote;};e.exports=da;},null);
__d("ComposerXForSaleExtrasComponent",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(){"use strict";}g.prototype.reset=function(){"use strict";};e.exports=g;},null);
__d("PlacesDataSource",["DataSource"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(k){"use strict";g.call(this,k);this._origBootstrapEndpoint=this.bootstrapEndpoint;}j.prototype.shouldFetchMoreResults=function(k){"use strict";if(this.queryData.new_js_ranking){return true;}else return i.shouldFetchMoreResults.call(this,k);};j.prototype.mergeUids=function(k,l,m,n){"use strict";if(this.queryData.new_js_ranking){this._checkExtendedMatch(n,k);return this.deduplicateByKey(m.concat(l,k));}else return i.mergeUids.call(this,k,l,m,n);};j.prototype.resetBootstrapEndpoint=function(k){"use strict";this.setBootstrapEndpoint(this._origBootstrapEndpoint,k);return this;};j.prototype.setBootstrapEndpoint=function(k,l){"use strict";if(this.bootstrapEndpoint!==k){this.bootstrapEndpoint=k;if(this._bootstrapped||this._bootstrapping)l=true;}if(l)this.dirty().bootstrap();return this;};j.prototype.getQueryEndpoint=function(){"use strict";return this.queryEndpoint;};j.prototype.getBootstrapData=function(){"use strict";return this.bootstrapData;};e.exports=j;},null);
__d("PlacesTypeaheadCore",["Arbiter","CSS","Focus","Run","StickyPlaceholderInput","Style","TypeaheadCore","copyProperties"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){b.__markCompiled&&b.__markCompiled();for(var o in m)if(m.hasOwnProperty(o))q[o]=m[o];var p=m===null?null:m.prototype;q.prototype=Object.create(p);q.prototype.constructor=q;q.__superConstructor__=m;function q(){"use strict";if(m!==null)m.apply(this,arguments);}q.prototype.init=function(r,s,t){"use strict";p.init.call(this,r,s,t);this.arbiterTokens=[g.subscribe('Places/PlaceCreationCancel'+this.callbackID,function(u,v){this.view.allowPlaceCreation=false;this.view.allowFreeformOption=true;this.view.reset();this.focusElement();}.bind(this))];j.onLeave(function(){this.arbiterTokens.forEach(g.unsubscribe);}.bind(this));this._typeaheadID=t.id;this._citySet=false;this.data.subscribe('fetchComplete',this.update.bind(this));};q.prototype.initToggle=function(){"use strict";var r=this.root.parentNode,s=l.get(r,'position')!='static'?r:this.root,t=this.view,u='PlacesTypeaheadFocused';this.subscribe('focus',function(){t.show();h.addClass(s,u);});this.subscribe('blur',function(){t.hide();h.removeClass(s,u);});};q.prototype.focusElement=function(){"use strict";i.set(this.element);this.value='';this.checkValue();};q.prototype.setValue=function(r){"use strict";p.setValue.call(this,r);k.update(this.element);};q.prototype.updateDataSource=function(r){"use strict";this.data.setQueryData({city_id:this._cityId,city_set:this._citySet});this.data.setBootstrapData({city_id:this._cityId});if(r){this.data.dirty();this.data.bootstrap();}};q.prototype.setCity=function(r,s){"use strict";this._citySet=s;if(this._cityId!==r){this._cityId=r;this.updateDataSource(s);}};q.prototype.update=function(r,s){"use strict";var t=s.response;if(!t)return;var u=t.getPayload();if(u.cityId)if(!this._citySet)this.setCity(u.cityId,false);};q.prototype.setLocation=function(r){"use strict";if(!r||!r.latitude||!r.longitude)return;this.data.setQueryData({latitude:r.latitude,longitude:r.longitude,want_checkin_places:true});this.data.setBootstrapData({latitude:r.latitude,longitude:r.longitude,want_checkin_places:true});this.data.resetBootstrapEndpoint(true);};n(q.prototype,{resetOnKeyup:false});e.exports=q;},null);
__d("PlacesTypeaheadBehavior",["CSS","DOM"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();var i={init:function(j,k){j.subscribe(['reset','select','highlight'],function(l,m){if(l==='highlight'&&m.index!==-1&&m.selected.type!='freeform'&&m.selected.map&&!m.selected.changeCity){h.setContent(k,m.selected.map);g.show(k);}else g.hide(k);});}};e.exports=i;},null);
__d("PlacesTypeaheadRendererUtil",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();var g=/[.,+*?$|#{}()\^\-\[\]\\\/!@%"~=<>_:;]/g;function h(k,l){return k.end>l.end||k.start<l.start;}function i(k,l){if(!k)return [];var m=[];k=k.replace(g,' ');var n=k.split(' ');for(var o=0;o<n.length;o++){if(!n[o])continue;var p=n[o];if(o<n.length-1)p=p+'[ ,]';var q=new RegExp(' '+p,'i'),r=q.exec((' '+l+' '));if(r){var s={start:r.index,end:r.index+n[o].length};if(m.every(h.bind(null,s)))m.push(s);}else return [];}m.sort(function(t,u){return t.start-u.start;});return m;}var j={match_positions:i};e.exports=j;},null);
__d("PlacesTypeaheadRenderer",["DOM","PlacesTypeaheadRendererUtil"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j,k){var l=[],m=j.photo;if(m)l.push(g.create('img',{alt:'',src:m}));if(j.text){var n=g.create('span',{className:'text'},""),o=j.text;if(j.address)o=o+" \u00b7 "+j.address;var p=[];if(j.value)p=h.match_positions(j.value,o);if(p.length>0){var q=0;for(var r=0;r<p.length;r++){var s=p[r].start,t=p[r].end;g.appendContent(n,o.substr(q,(s-q)));g.appendContent(n,g.create('span',{className:'bold'},o.substr(s,t-s)));q=t;}g.appendContent(n,o.substr(q));}else{g.appendContent(n,g.create('span',{className:'bold'},j.text));if(j.address)g.appendContent(n," \u00b7 "+j.address);}l.push(g.create('span',{},n));}var u=j.subtext,v=j.category;if(u||v){var w=[];u&&w.push(u);v&&w.push(v);l.push(g.create('span',{className:'subtext'},w.join(' \u00b7 ')));}return g.create('li',{className:j.type||''},l);}i.className='places';e.exports=i;},null);
__d("PlacesTypeaheadView",["Arbiter","CSS","Dialog","DOM","Parent","Run","Scroll","ScrollableArea","Style","TypeaheadView","copyProperties","fbt"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){b.__markCompiled&&b.__markCompiled();for(var s in p)if(p.hasOwnProperty(s))u[s]=p[s];var t=p===null?null:p.prototype;u.prototype=Object.create(t);u.prototype.constructor=u;u.__superConstructor__=p;function u(){"use strict";if(p!==null)p.apply(this,arguments);}u.prototype.init=function(){"use strict";this.content=j.find(this.element,'div.PlacesTypeaheadViewList');t.init.call(this);this.subscribe(['render','reset'],this.renderBorders.bind(this));this.arbiterTokens=[g.subscribe('Places/PlaceCreated'+this.callbackID,function(v,w){var x={text:w.name,rawtext:w.name,uid:w.fbid,city_id:w.city_id,city_name:w.city_name,city_page_id:w.city_page_id};this.inform('select',{index:-1,clicked:true,selected:x});this.inform('afterSelect');}.bind(this))];this.arbiterTokens.push(g.subscribe('Events/autoSuggestionSelected',function(v,w){this.inform('select',{index:-1,clicked:true,selected:{text:w.event_name,rawtext:w.event_name,uid:w.event_fbid}});this.inform('afterSelect');}.bind(this)));l.onLeave(function(){this.arbiterTokens.forEach(g.unsubscribe);}.bind(this));};u.prototype.renderBorders=function(){"use strict";h.conditionClass(this.element,'PlacesTypeaheadViewPopulated',this.items.length);};u.prototype.show=function(){"use strict";t.show.call(this);if(!this.results||!this.results.length)o.set(this.element,'height',0);};u.prototype.render=function(v,w,x){"use strict";w.forEach(function(ba){ba.value=v;});if(this.allowFreeformOption&&v&&(!w||w.length===0||w[w.length-1].type!='freeform')){var y=r._("Use \"{custom_location}\"",[r.param("custom_location",v)]);w.push({uid:'0',rawtext:v,text:y,type:'freeform'});}if(this.allowPlaceCreation&&v&&(!w||w.length===0||w[w.length-1].type!='placecreate')){var z=r._("Adicionar local \"{custom_location}\"",[r.param("custom_location",v)]);w.push({uid:'0',rawtext:v,text:z,type:'placecreate'});}t.render.call(this,v,w,x);this.element.style.visibility='hidden';if(this.visible&&this.results&&this.results.length)o.set(this.element,'height','');var aa=n.getInstance(this.content);aa&&aa.adjustGripper();this.inform('afterRender',w);this.element.style.visibility='';};u.prototype.select=function(v){"use strict";var w=this.index,x=this.results[w];if(x){if(x.type==='placecreate'){i.bootstrap('/ajax/places/create/dialog.php',{name:x.rawtext,callback_id:this.callbackID});return;}if(x.type==='freeform')x.text=x.rawtext;t.select.call(this,v);}};u.prototype.next=function(){"use strict";t.next.call(this);this._scrollIntoView(this.selected);};u.prototype.prev=function(){"use strict";t.prev.call(this);this._scrollIntoView(this.selected);};u.prototype._scrollIntoView=function(v){"use strict";if(!k.byClass(v,'uiScrollableArea'))return;this.ignoreNextMouseover=true;var w=k.byClass(v,'uiScrollableAreaWrap'),x=v.offsetTop-w.offsetTop;if(x<m.getTop(w)){m.setTop(w,x);return;}var y=x+v.offsetHeight;if(y>m.getTop(w)+w.offsetHeight)m.setTop(w,y-w.offsetHeight);};u.prototype.mouseover=function(event){"use strict";this.ignoreNextMouseover||t.mouseover.call(this,event);this.ignoreNextMouseover=false;};u.prototype.highlight=function(v){"use strict";t.highlight.call(this,v,true);};q(u.prototype,{ignoreNextMouseover:false});e.exports=u;},null);
__d("OGComposerActionTypeTypeaheadRenderer",["CSS","DOM","CompactTypeaheadRenderer","cx"],function(a,b,c,d,e,f,g,h,i,j){b.__markCompiled&&b.__markCompiled();function k(l,m){var n=i(l,m);h.prependContent(n,l.icon);if(l.type=='action_type'){var o=h.create('i',{className:'arrowRight'});h.prependContent(n,o);}var p=h.scry(n,'span');if(p.length==1)g.addClass(p[0],"_5lpy");return n;}k.className="compact _47i9";e.exports=k;},null);
__d("OGComposerNounTypeaheadMetrics",["TypeaheadMetrics"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.submit=function(){"use strict";if('log_all_sessions' in this.extraData||this.hasStats())this.stats.at_id=this.data.queryData.at_id;i.submit.call(this);};e.exports=j;},null);
__d("OGComposerObjectDataSource",["createArrayFromMixed","DataSource"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();for(var i in h)if(h.hasOwnProperty(i))k[i]=h[i];var j=h===null?null:h.prototype;k.prototype=Object.create(j);k.prototype.constructor=k;k.__superConstructor__=h;function k(){"use strict";if(h!==null)h.apply(this,arguments);}k.prototype.addEntries=function(l,m){"use strict";var n=this.processEntries(g(l||[]),m);if(m){var o=this.getQueryCache(),p=this.tokenizeCache(m).flatValue;o[p]=n;}};e.exports=k;},null);
__d("OGNounTypeaheadView",["CSS","DOM","HubsTypeaheadView","ScrollableArea","csx","cx","fbt","throttle","tidyEvent"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o){b.__markCompiled&&b.__markCompiled();var p;for(var q in i)if(i.hasOwnProperty(q))s[q]=i[q];var r=i===null?null:i.prototype;s.prototype=Object.create(r);s.prototype.constructor=s;s.__superConstructor__=i;function s(){"use strict";if(i!==null)i.apply(this,arguments);}s.prototype._bindScrollListener=function(){"use strict";this._getScrollableArea()&&o(p.subscribe('scroll',n(this._checkScroll.bind(this))));};s.prototype._checkScroll=function(){"use strict";var t=this._getLastItemID();if(p.isScrolledToBottom()&&this._lastItemID!==t){this._lastItemID=t;this.inform('scrolledtobottom',{scrollableArea:p});}};s.prototype._createFreeFormNode=function(t){"use strict";return {orig_text:t,icon:this.defaultIcon,text:t,type:'calltoaction'};};s.prototype._getScrollableArea=function(){"use strict";if(!this._scrollableArea)this._scrollableArea=j.getInstance(this.content);return p=this._scrollableArea;};s.prototype._getLastItemID=function(){"use strict";var t=this.items[this.items.length-1];return t&&t.getAttribute('aria-label');};s.prototype.init=function(){"use strict";this.content=h.find(this.element,"div._52yd");r.init.call(this);o([this.subscribe(['render','reset'],this._updateView.bind(this)),this.subscribe('highlight',this._scrollIntoView.bind(this)),this.subscribeOnce('render',this._bindScrollListener.bind(this))]);};s.prototype._scrollIntoView=function(t,u){"use strict";if(this._getScrollableArea()){this.ignoreMouseover=true;p.scrollIntoView(u.element,false);}};s.prototype.setContext=function(t){"use strict";this.defaultIcon=t.default_icon;this.actionTypeID=t.uid;var u=!this.actionTypeIDsWithNoFreeform||!this.actionTypeIDsWithNoFreeform[this.actionTypeID];this.alwaysRender=u;this.allowFreeform=u;this.allowFreeformEntry=u;};s.prototype._updateView=function(){"use strict";this._lastItemID=null;g.conditionClass(this.element,"_52yc",this.items.length);};s.prototype._createCustomAddNode=function(){"use strict";return {text:m._("Adicione sua pr\u00f3pria atividade..."),type:'calltoaction customadd',icon:this.defaultIcon};};s.prototype._containCustomAddNode=function(t){"use strict";for(var u=0;u<t.length;u++)if(t[u].type==='calltoaction customadd')return true;return false;};s.prototype.render=function(t,u,v){"use strict";if(this.allowFreeform&&u.length&&t===''&&!this._containCustomAddNode(u))u.push(this._createCustomAddNode());return r.render.call(this,t,u,v);};s.prototype.select=function(t){"use strict";var u=this.results[this.index];if(u&&u.type.match('customadd')){this.causalElement.focus();this.layer.hide();return;}if(u)u.actionTypeID=this.actionTypeID;return r.select.call(this,t);};e.exports=s;},null);
__d("TypeaheadShowAllBootstrapOnFocus",["TypeaheadShowBootstrapOnFocus"],function(a,b,c,d,e,f,g){b.__markCompiled&&b.__markCompiled();for(var h in g)if(g.hasOwnProperty(h))j[h]=g[h];var i=g===null?null:g.prototype;j.prototype=Object.create(i);j.prototype.constructor=j;j.__superConstructor__=g;function j(){"use strict";if(g!==null)g.apply(this,arguments);}j.prototype.getMaxBootstrapEntries=function(){"use strict";return (void 0);};j.prototype.cacheUids=function(){"use strict";return false;};e.exports=j;},null);
__d("OGComposerObjectTypeaheadRenderer",["CompactTypeaheadRenderer","DOM"],function(a,b,c,d,e,f,g,h){b.__markCompiled&&b.__markCompiled();function i(j,k){var l=g(j,k),m=j.icon;if(m)h.prependContent(l,m);return l;}i.className=g.className;e.exports=i;},null);
__d("VaultGridUploadItem",[],function(a,b,c,d,e,f){b.__markCompiled&&b.__markCompiled();function g(h){"use strict";this.$VaultGridUploadItem0=h;}g.prototype.getUploadInput=function(){"use strict";return this.$VaultGridUploadItem0;};e.exports=g;},null);